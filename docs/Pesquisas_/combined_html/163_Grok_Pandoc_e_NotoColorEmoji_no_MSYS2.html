<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>

        <style id="fixed-toc-styles">
        /* === ESTILOS PRINCIPAIS - TOC FIXO √Ä DIREITA === */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
            scroll-behavior: smooth;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            position: relative;
        }
        /* === TOC FIXO √Ä DIREITA - POSI√á√ÉO CORRIGIDA === */
        #TOC {
            position: fixed !important;
            top: 50% !important;
            right: 20px !important;
            transform: translateY(-50%) !important;
            width: 320px !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            z-index: 1000 !important;
            background: rgba(255, 255, 255, 0.98) !important;
            padding: 20px !important;
            border-radius: 12px !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15) !important;
            border: 1px solid #e0e0e0 !important;
            backdrop-filter: blur(10px) !important;
            transition: all 0.3s ease-in-out !important;
        }
        #TOC.toc-minimized {
            transform: translateY(-50%) translateX(calc(320px - 50px)) !important;
            opacity: 0.3;
            width: 50px !important;
            overflow: hidden;
        }
        #TOC.toc-minimized > *:not(.toc-toggle-btn) {
            display: none !important;
        }
        #TOC h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .toc-toggle-btn {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .toc-toggle-btn:hover {
            background-color: rgba(0,0,0,0.1);
        }
        #TOC ul {
            list-style-type: none;
            padding-left: 15px;
            margin: 10px 0;
        }
        #TOC ul ul {
            padding-left: 20px;
        }
        #TOC li {
            margin: 8px 0;
            line-height: 1.4;
        }
        #TOC a {
            text-decoration: none;
            color: #495057;
            font-weight: 500;
            transition: all 0.2s ease;
            display: block;
            padding: 6px 10px;
            border-radius: 6px;
            border-left: 3px solid transparent;
        }
        #TOC a:hover {
            color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
            border-left-color: #007bff;
        }
        #TOC a.active {
            background-color: #007bff !important;
            color: white !important;
            font-weight: bold;
            border-left-color: #0056b3;
        }
        /* Conte√∫do principal com margem para o TOC */
        .main-content {
            margin-right: calc(320px + 40px) !important;
        }
        /* Barra de scroll personalizada APENAS para TOC */
        #TOC::-webkit-scrollbar {
            width: 8px;
        }
        #TOC::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        #TOC::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        #TOC::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        /* === BOT√ÉO VOLTAR AO TOPO (HTMLs individuais) === */
        .back-to-top-content {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .back-to-top-content.show {
            opacity: 1;
            transform: translateY(0);
        }
        .back-to-top-content:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }
        /* === RESPONSIVIDADE === */
        @media (max-width: 1400px) {
            .container {
                max-width: 95%;
                padding: 30px;
            }
            #TOC {
                width: 280px !important;
            }
            .main-content {
                margin-right: 320px !important;
            }
        }
        @media (max-width: 1200px) {
            #TOC {
                width: 260px !important;
                right: 15px !important;
            }
            .main-content {
                margin-right: 300px !important;
            }
        }
        @media (max-width: 992px) {
            #TOC {
                position: relative !important;
                width: 100% !important;
                right: 0 !important;
                top: 0 !important;
                transform: none !important;
                margin: 20px 0;
                max-height: 300px !important;
            }
            .main-content {
                margin-right: 0 !important;
            }
            .back-to-top-content {
                right: 20px;
                bottom: 20px;
            }
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
                max-width: 100%;
            }
            #TOC {
                max-height: 250px !important;
                padding: 15px !important;
            }
        }
        </style>
        
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>163_Grok_Pandoc_e_NotoColorEmoji_no_MSYS2</title>
  <style>

html {
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 36em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 12px;
}
h1 {
font-size: 1.8em;
}
}
@media print {
html {
background-color: white;
}
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3, h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
svg {
height: auto;
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 0 1em 1.7em;
padding-left: 1em;
border-left: 2px solid #e6e6e6;
color: #606060;
}
code {
font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
hyphens: manual;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
hr {
border: none;
border-top: 1px solid #1a1a1a;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}

html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#pandoc-e-notocoloremoji-no-msys2" id="toc-pandoc-e-notocoloremoji-no-msys2"><span class="toc-section-number">1</span> Pandoc e NotoColorEmoji no MSYS2</a>
<ul>
<li><a href="#informa√ß√µes" id="toc-informa√ß√µes"><span class="toc-section-number">1.1</span> üìä Informa√ß√µes</a></li>
<li><a href="#conversa" id="toc-conversa"><span class="toc-section-number">1.2</span> üí¨ Conversa</a></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="pandoc-e-notocoloremoji-no-msys2"><span class="header-section-number">1</span> Pandoc e NotoColorEmoji no
MSYS2</h1>
<h2 data-number="1.1" id="informa√ß√µes"><span class="header-section-number">1.1</span> üìä Informa√ß√µes</h2>
<ul>
<li><strong>N√∫mero:</strong> #163</li>
<li><strong>Origem:</strong> Grok</li>
<li><strong>Categoria:</strong> Programa√ß√£o</li>
<li><strong>ID:</strong> 839f277b-2a68-446c-a974-18930d1e8344</li>
<li><strong>Criada em:</strong> 2025-09-23 16:08:36Z</li>
<li><strong>Atualizada em:</strong> 2025-09-23 20:45:56Z</li>
<li><strong>Total de mensagens:</strong> 44</li>
<li><strong>Resumo:</strong> Usar pandoc e NotoColorEmoji.ttf no
msys2‚Ä¶</li>
</ul>
<hr />
<h2 data-number="1.2" id="conversa"><span class="header-section-number">1.2</span> üí¨ Conversa</h2>
<h3 data-number="1.2.1" id="utilizador-2025-09-23-170836-grok"><span class="header-section-number">1.2.1</span> üë§ Utilizador <em>(2025-09-23
17:08:36)</em> <em>[Grok]</em></h3>
<p>Usar pandoc e NotoColorEmoji.ttf no msys2</p>
<hr />
<h3 data-number="1.2.2" id="grok-2025-09-23-170857-grok"><span class="header-section-number">1.2.2</span> ü§ñ Grok <em>(2025-09-23
17:08:57)</em> <em>[Grok]</em></h3>
<h3 data-number="1.2.3" id="instalando-e-configurando-pandoc-e-noto-color-emoji-no-msys2"><span class="header-section-number">1.2.3</span> Instalando e Configurando
Pandoc e Noto Color Emoji no MSYS2</h3>
<p>Ol√°! Pelo que entendi, voc√™ quer usar o Pandoc (ferramenta de
convers√£o de documentos, como Markdown para PDF) junto com a fonte
NotoColorEmoji.ttf (para suporte a emojis coloridos) no ambiente MSYS2
(um terminal Unix-like para Windows). Vou explicar passo a passo como
instalar tudo e configurar para que emojis sejam renderizados
corretamente, especialmente ao gerar PDFs com LaTeX.</p>
<p>MSYS2 usa pacotes via <code>pacman</code>, e tanto o Pandoc quanto
fontes como Noto est√£o dispon√≠veis nos reposit√≥rios. O suporte a emojis
coloridos em PDFs gerados pelo Pandoc requer configura√ß√£o de fallback de
fontes no LuaLaTeX (o motor recomendado para Unicode).</p>
<h4 data-number="1.2.3.1" id="passo-1-atualize-o-msys2"><span class="header-section-number">1.2.3.1</span> Passo 1: Atualize o
MSYS2</h4>
<p>Abra o terminal MSYS2 (ou MinGW64) e execute:</p>
<pre><code>pacman -Syu</code></pre>
<p>Isso atualiza o sistema. Reinicie o terminal se solicitado.</p>
<h4 data-number="1.2.3.2" id="passo-2-instale-o-pandoc"><span class="header-section-number">1.2.3.2</span> Passo 2: Instale o
Pandoc</h4>
<p>O Pandoc est√° dispon√≠vel como pacote oficial no MSYS2:</p>
<pre><code>pacman -S mingw-w64-x86_64-pandoc</code></pre>
<ul>
<li>Isso instala a vers√£o mais recente (atualmente ~3.x, dependendo da
data).</li>
<li>Verifique a instala√ß√£o com <code>pandoc --version</code>.</li>
</ul>
<h4 data-number="1.2.3.3" id="passo-3-instale-a-fonte-noto-color-emoji"><span class="header-section-number">1.2.3.3</span> Passo 3: Instale a Fonte
Noto Color Emoji</h4>
<p>A fonte Noto Color Emoji n√£o tem um pacote dedicado
‚Äúfonts-noto-color-emoji‚Äù no MSYS2 (diferente de distribui√ß√µes Linux como
Debian), mas voc√™ pode instal√°-la manualmente baixando do reposit√≥rio
oficial do Google Fonts. Ela √© essencial para emojis coloridos em
PDFs.</p>
<ol type="1">
<li>Baixe o arquivo <code>NotoColorEmoji.ttf</code>:
<ul>
<li><p>V√° para <a href="https://github.com/googlefonts/noto-emoji">github.com/googlefonts/noto-emoji</a>
e baixe o release mais recente (ou diretamente o arquivo via wget no
terminal):</p>
<pre><code>wget https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</code></pre></li>
<li><p>Isso baixa o arquivo no diret√≥rio atual.</p></li>
</ul></li>
<li>Instale a fonte no sistema:
<ul>
<li><p>Copie para o diret√≥rio de fontes do Windows (acess√≠vel via
MSYS2):</p>
<pre><code>cp NotoColorEmoji.ttf /c/Windows/Fonts/</code></pre></li>
<li><p>Ou use o instalador de fontes do Windows: Abra o Explorador de
Arquivos, clique direito no .ttf e selecione ‚ÄúInstalar para todos os
usu√°rios‚Äù.</p></li>
<li><p>No MSYS2, para uso em apps como terminal (mintty), configure em
<code>~/.minttyrc</code>:</p>
<pre><code>Font=NotoColorEmoji</code></pre>
<p>(Reinicie o terminal para aplicar.)</p></li>
</ul>
<strong>Nota:</strong> Emojis coloridos dependem do motor de
renderiza√ß√£o. No Chrome/Edge, funciona nativamente; em PDFs, precisa de
configura√ß√£o no Pandoc (veja abaixo).</li>
</ol>
<h4 data-number="1.2.3.4" id="passo-4-instale-depend√™ncias-para-gera√ß√£o-de-pdf-com-emojis"><span class="header-section-number">1.2.3.4</span> Passo 4: Instale
Depend√™ncias para Gera√ß√£o de PDF com Emojis</h4>
<p>Para gerar PDFs com suporte a Unicode/emojis, use LuaLaTeX (melhor
que XeLaTeX para fallbacks):</p>
<pre><code>pacman -S mingw-w64-x86_64-teXlive-bin mingw-w64-x86_64-teXlive-core mingw-w64-x86_64-teXlive-latexextra mingw-w64-x86_64-teXlive-fontsextra</code></pre>
<ul>
<li>Isso instala o TeX Live completo, incluindo <code>fontspec</code> e
<code>luaotfload</code> (para fontes OTF/TTF).</li>
<li>Verifique com <code>lualatex --version</code>.</li>
</ul>
<h4 data-number="1.2.3.5" id="passo-5-usando-pandoc-com-noto-color-emoji"><span class="header-section-number">1.2.3.5</span> Passo 5: Usando Pandoc com
Noto Color Emoji</h4>
<p>Agora, configure o Pandoc para usar Noto como fallback para emojis.
Isso √© feito via YAML no cabe√ßalho do Markdown ou via linha de
comando.</p>
<p><strong>Exemplo de Arquivo Markdown
(<code>exemplo.md</code>):</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mainfont</span><span class="kw">:</span><span class="at"> Latin Modern Roman</span><span class="co">  # Fonte principal (instalada por padr√£o no TeX)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mainfontfallback</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;Noto Color Emoji:mode=harf&quot;</span><span class="co">  # Fallback para emojis coloridos</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># T√≠tulo com Emoji üò∫</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Texto normal com emoji</span><span class="kw">:</span><span class="at"> üöÄ e bandeira üáßüá∑.</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">Mais um</span><span class="kw">:</span><span class="at"> ‚úÖ</span></span></code></pre></div>
<p><strong>Comando para Gerar PDF:</strong></p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex</code></pre>
<ul>
<li><code>--pdf-engine=lualatex</code>: Usa LuaLaTeX para suporte a
fallbacks.</li>
<li>O fallback <code>&quot;Noto Color Emoji:mode=harf&quot;</code> instrui o
LuaLaTeX a usar Noto para glifos de emoji (modo ‚Äúharf‚Äù para composi√ß√£o
de cores bitmap).</li>
<li>Se o nome da fonte n√£o for reconhecido, use o caminho completo:
<code>&quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</code>.</li>
</ul>
<p><strong>Se quiser especificar via linha de comando (sem
YAML):</strong></p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex -V mainfont=&quot;Latin Modern Roman&quot; -V mainfontfallback=&#39;[&quot;Noto Color Emoji:mode=harf&quot;]&#39;</code></pre>
<p><strong>Exemplo de Sa√≠da Esperada:</strong> - O PDF deve mostrar
emojis coloridos (üò∫ como gato colorido, n√£o preto e branco). - Se vir
avisos como ‚ÄúMissing character‚Äù, verifique se a fonte est√° instalada
corretamente ou ajuste o fallback.</p>
<h4 data-number="1.2.3.6" id="dicas-e-solu√ß√£o-de-problemas"><span class="header-section-number">1.2.3.6</span> Dicas e Solu√ß√£o de
Problemas</h4>
<ul>
<li><p><strong>Emojis em HTML/Outros Formatos:</strong> Para HTML,
adicione CSS no template:
<code>@font-face { font-family: &#39;Noto Color Emoji&#39;; src: url(&#39;NotoColorEmoji.ttf&#39;); }</code>
e use <code>--css=estilo.css</code>.</p></li>
<li><p><strong>Teste Simples de Emoji:</strong> Crie um MD com
<code>üòÄ</code> e converta para PDF. Se n√£o aparecer colorido, teste com
<code>pandoc --pdf-engine=lualatex -V mainfont=&quot;Noto Color Emoji&quot; teste.md -o teste.pdf</code>
(mas isso usa s√≥ emoji como fonte principal, o que bagun√ßa o
texto).</p></li>
<li><p><strong>Fontconfig no MSYS2:</strong> Se precisar de alias para
fontes, crie <code>~/.config/fontconfig/fonts.conf</code> com:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span> <span class="ot">version=</span><span class="st">&quot;1.0&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">fontconfig</span>&gt;</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">alias</span>&gt;</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">family</span>&gt;emoji&lt;/<span class="kw">family</span>&gt;</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">prefer</span>&gt;</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">family</span>&gt;Noto Color Emoji&lt;/<span class="kw">family</span>&gt;</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">prefer</span>&gt;</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">alias</span>&gt;</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">fontconfig</span>&gt;</span></code></pre></div>
<p>Instale <code>fontconfig</code> com
<code>pacman -S mingw-w64-x86_64-fontconfig</code>.</p></li>
<li><p><strong>Vers√µes Antigas:</strong> Se quiser uma vers√£o espec√≠fica
de Noto (ex: v11.0), baixe de releases no GitHub.</p></li>
<li><p><strong>Limita√ß√µes:</strong> Pandoc n√£o suporta emojis em todos
os motores (ex: PDF/A ignora cores). Use LuaLaTeX para melhor
compatibilidade.</p></li>
</ul>
<p>Se isso n√£o resolver ou se voc√™ tiver um erro espec√≠fico, me d√™ mais
detalhes (como o comando exato ou output de erro)! üòä</p>
<hr />
<h3 data-number="1.2.4" id="utilizador-2025-09-23-171113-grok"><span class="header-section-number">1.2.4</span> üë§ Utilizador <em>(2025-09-23
17:11:13)</em> <em>[Grok]</em></h3>
<p>pacman -S mingw-w64-x86_64-pandoc error: target not found:
mingw-w64-x86_64-pandoc</p>
<hr />
<h3 data-number="1.2.5" id="grok-2025-09-23-171130-grok"><span class="header-section-number">1.2.5</span> ü§ñ Grok <em>(2025-09-23
17:11:30)</em> <em>[Grok]</em></h3>
<h3 data-number="1.2.6" id="solu√ß√£o-para-o-erro-target-not-found-mingw-w64-x86_64-pandoc-no-msys2"><span class="header-section-number">1.2.6</span> Solu√ß√£o para o Erro: ‚Äútarget
not found: mingw-w64-x86_64-pandoc‚Äù no MSYS2</h3>
<p>Ol√°! Esse erro indica que o pacote
<code>mingw-w64-x86_64-pandoc</code> n√£o existe nos reposit√≥rios
oficiais do MSYS2. De fato, ap√≥s verifica√ß√£o, o Pandoc n√£o √© empacotado
diretamente como um bin√°rio standalone no MSYS2 (h√° apenas bibliotecas
relacionadas, como <code>python-pandocfilters</code>). Isso √© comum para
ferramentas Haskell como o Pandoc, que nem sempre s√£o inclu√≠das nos
reposit√≥rios MinGW.</p>
<p>Vou te guiar por alternativas simples e confi√°veis para instalar o
Pandoc no MSYS2, mantendo a compatibilidade com o ambiente MinGW64 (que
voc√™ parece estar usando, pelo prefixo <code>mingw-w64-x86_64-</code>).
Priorizei m√©todos que funcionam bem em 2025, com base em documenta√ß√µes
atualizadas. O mais f√°cil √© usar o instalador oficial do Pandoc, que
integra perfeitamente com MSYS2.</p>
<h4 data-number="1.2.6.1" id="op√ß√£o-1-instala√ß√£o-recomendada---usando-o-instalador-oficial-do-pandoc-mais-simples-e-atual"><span class="header-section-number">1.2.6.1</span> Op√ß√£o 1: Instala√ß√£o
Recomendada - Usando o Instalador Oficial do Pandoc (Mais Simples e
Atual)</h4>
<p>O Pandoc fornece um instalador MSI para Windows que instala o
execut√°vel globalmente (em <code>C:\Program Files\Pandoc</code>),
acess√≠vel de qualquer terminal, incluindo o MSYS2. Isso evita
depend√™ncias Haskell no MSYS2 e garante a vers√£o mais recente (~3.1.x em
setembro de 2025).</p>
<ol type="1">
<li><strong>Baixe o Instalador:</strong>
<ul>
<li><p>Acesse <a href="https://pandoc.org/installing.html">pandoc.org/installing.html</a>
e baixe o ‚ÄúWindows 64-bit installer (MSI)‚Äù.</p></li>
<li><p>Ou, no terminal MSYS2, use <code>curl</code> (instale com
<code>pacman -S curl</code> se necess√°rio):</p>
<pre><code>curl -L -o pandoc.msi https://github.com/jgm/pandoc/releases/latest/download/pandoc-3.1.13-windows-x86_64.msi</code></pre>
<p>(Substitua pela vers√£o exata do link de download mais recente;
verifique em <a href="https://github.com/jgm/pandoc/releases">github.com/jgm/pandoc/releases</a>.)</p></li>
</ul></li>
<li><strong>Instale o MSI:</strong>
<ul>
<li><p>No Windows Explorer, clique duplo no <code>.msi</code> e siga o
wizard (instale para todos os usu√°rios).</p></li>
<li><p>Ou, via linha de comando no PowerShell (como admin):</p>
<pre><code>msiexec /i pandoc.msi /quiet</code></pre></li>
</ul></li>
<li><strong>Verifique no MSYS2:</strong>
<ul>
<li><p>Abra o terminal MinGW64.</p></li>
<li><p>O <code>pandoc</code> deve estar no PATH automaticamente (via
<code>/c/Program Files/Pandoc</code>). Teste:</p>
<pre><code>pandoc --version</code></pre></li>
<li><p>Se n√£o encontrar, adicione ao PATH no <code>~/.bashrc</code>
(edite com <code>nano ~/.bashrc</code>):</p>
<pre><code>export PATH=&quot;/c/Program Files/Pandoc:$PATH&quot;</code></pre>
<p>Recarregue com <code>source ~/.bashrc</code>.</p></li>
</ul></li>
</ol>
<p><strong>Vantagens:</strong> F√°cil, vers√£o oficial, suporta todas as
features (incluindo LuaLaTeX para PDFs com emojis). Funciona
perfeitamente com as depend√™ncias TeX que instalamos antes.</p>
<h4 data-number="1.2.6.2" id="op√ß√£o-2-compila√ß√£o-via-stack-haskell-no-msys2-se-voc√™-quiser-nativo"><span class="header-section-number">1.2.6.2</span> Op√ß√£o 2: Compila√ß√£o via
Stack (Haskell) no MSYS2 (Se Voc√™ Quiser Nativo)</h4>
<p>Se preferir uma instala√ß√£o nativa no MSYS2 (sem MSI), use o Stack
(gerenciador Haskell). Isso constr√≥i o Pandoc do source.</p>
<ol type="1">
<li><p><strong>Instale Depend√™ncias Haskell:</strong></p>
<pre><code>pacman -S mingw-w64-x86_64-stack mingw-w64-x86_64-ghc</code></pre></li>
<li><p><strong>Instale o Pandoc via Stack:</strong></p>
<pre><code>stack install pandoc</code></pre>
<ul>
<li>Isso baixa e compila (~10-20 min, dependendo da m√°quina). O bin√°rio
vai para <code>~/.stack/programs/.../pandoc.exe</code>.</li>
</ul></li>
<li><p><strong>Adicione ao PATH:</strong> No <code>~/.bashrc</code>:</p>
<pre><code>export PATH=&quot;$HOME/.stack/programs/x86_64-windows/ghc-9.xx.x/bin:$PATH&quot;  # Ajuste a vers√£o do GHC</code></pre>
<p>Recarregue e teste: <code>pandoc --version</code>.</p></li>
</ol>
<p><strong>Nota:</strong> Pode precisar de mais RAM/CPU. Se der erro de
depend√™ncias, rode <code>stack setup</code> primeiro.</p>
<h4 data-number="1.2.6.3" id="op√ß√£o-3-via-chocolatey-gerenciador-de-pacotes-windows"><span class="header-section-number">1.2.6.3</span> Op√ß√£o 3: Via Chocolatey
(Gerenciador de Pacotes Windows)</h4>
<p>Se voc√™ tiver o Chocolatey instalado (veja <a href="https://chocolatey.org/install">chocolatey.org/install</a>):</p>
<ol type="1">
<li><p>No terminal MSYS2 (ou PowerShell como admin):</p>
<pre><code>choco install pandoc</code></pre></li>
<li><p>Adicione ao PATH se necess√°rio (similar √† Op√ß√£o 1).</p></li>
</ol>
<h4 data-number="1.2.6.4" id="continuando-com-noto-color-emoji-e-pdfs"><span class="header-section-number">1.2.6.4</span> Continuando com Noto Color
Emoji e PDFs</h4>
<p>Uma vez instalado o Pandoc (qualquer op√ß√£o), o resto da configura√ß√£o
anterior permanece igual: - Instale TeX Live:
<code>pacman -S mingw-w64-x86_64-texlive-bin mingw-w64-x86_64-texlive-core mingw-w64-x86_64-texlive-latexextra mingw-w64-x86_64-texlive-fontsextra</code>
- Baixe e instale <code>NotoColorEmoji.ttf</code> como antes. - Use o
comando:
<code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex -V mainfontfallback=&#39;[&quot;Noto Color Emoji:mode=harf&quot;]&#39;</code></p>
<p>Se o erro persistir ou voc√™ encontrar problemas na instala√ß√£o (ex:
vers√£o espec√≠fica), me mande o output completo do
<code>pacman -Syu</code> ou do erro! Vamos resolver. üò∫</p>
<hr />
<h3 data-number="1.2.7" id="utilizador-2025-09-23-174811-grok"><span class="header-section-number">1.2.7</span> üë§ Utilizador <em>(2025-09-23
17:48:11)</em> <em>[Grok]</em></h3>
<p>NotoColorEmoji n√£o est√° afuncionar no msys2</p>
<hr />
<h3 data-number="1.2.8" id="grok-2025-09-23-174850-grok"><span class="header-section-number">1.2.8</span> ü§ñ Grok <em>(2025-09-23
17:48:50)</em> <em>[Grok]</em></h3>
<p>Entendido! Parece que voc√™ j√° seguiu os passos para instalar o Pandoc
e a fonte <code>NotoColorEmoji.ttf</code> no MSYS2, mas os emojis
coloridos n√£o est√£o funcionando como esperado, provavelmente ao gerar
PDFs com o Pandoc e LuaLaTeX. Vou te ajudar a diagnosticar e corrigir o
problema de forma clara e concisa, focando em por que a fonte
<code>Noto Color Emoji</code> n√£o est√° funcionando no MSYS2 e como
configurar corretamente.</p>
<h3 data-number="1.2.9" id="passos-para-diagnosticar-e-corrigir"><span class="header-section-number">1.2.9</span> Passos para Diagnosticar e
Corrigir</h3>
<h4 data-number="1.2.9.1" id="verifique-a-instala√ß√£o-da-fonte"><span class="header-section-number">1.2.9.1</span> 1. Verifique a Instala√ß√£o
da Fonte</h4>
<p>A fonte <code>NotoColorEmoji.ttf</code> precisa estar acess√≠vel ao
sistema e ao LuaLaTeX. Vamos confirmar:</p>
<ul>
<li><strong>Confirme a Presen√ßa da Fonte:</strong>
<ul>
<li><p>Voc√™ baixou <code>NotoColorEmoji.ttf</code> (ex.: via
<code>wget https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</code>)
e copiou para <code>/c/Windows/Fonts/</code> ou instalou via Windows
Explorer?</p></li>
<li><p>No MSYS2, verifique se a fonte est√° no diret√≥rio:</p>
<pre><code>ls /c/Windows/Fonts/NotoColorEmoji.ttf</code></pre></li>
<li><p>Se n√£o estiver, recopie:</p>
<pre><code>cp NotoColorEmoji.ttf /c/Windows/Fonts/</code></pre></li>
</ul></li>
<li><strong>Teste a Fonte no Sistema:</strong>
<ul>
<li>Abra um editor de texto no Windows (ex.: Notepad) e digite emojis
(üò∫üöÄ). Selecione a fonte ‚ÄúNoto Color Emoji‚Äù. Se os emojis aparecerem
coloridos, a fonte est√° instalada no Windows.</li>
<li>No MSYS2, o LuaLaTeX usa <code>luaotfload</code> para carregar
fontes. Teste com um comando simples (abaixo).</li>
</ul></li>
</ul>
<h4 data-number="1.2.9.2" id="verifique-a-configura√ß√£o-do-lualatex"><span class="header-section-number">1.2.9.2</span> 2. Verifique a Configura√ß√£o
do LuaLaTeX</h4>
<p>O suporte a emojis coloridos depende do <code>luaotfload</code> e do
modo <code>harf</code> (HarfBuzz renderer). Se isso n√£o est√°
funcionando, pode ser um problema de configura√ß√£o ou cache de
fontes.</p>
<ul>
<li><p><strong>Teste B√°sico com LuaLaTeX:</strong> Crie um arquivo
<code>teste.tex</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={Noto Color Emoji:mode=harf}]</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile no MSYS2:</p>
<pre><code>lualatex teste.tex</code></pre>
<ul>
<li>Se o PDF (<code>teste.pdf</code>) n√£o mostrar emojis coloridos, o
problema est√° no <code>luaotfload</code> ou na fonte.</li>
</ul></li>
<li><p><strong>Atualize o Cache de Fontes:</strong> O
<code>luaotfload</code> pode n√£o ter detectado a fonte. Atualize o
cache:</p>
<pre><code>luaotfload-tool -u -f</code></pre>
<ul>
<li><p>Se der erro, instale <code>luaotfload</code>:</p>
<pre><code>pacman -S mingw-w64-x86_64-texlive-luatex</code></pre></li>
</ul></li>
<li><p><strong>Confirme o Nome da Fonte:</strong> O nome exato da fonte
pode variar. Liste as fontes dispon√≠veis:</p>
<pre><code>luaotfload-tool --list=names</code></pre>
<p>Procure por ‚ÄúNoto Color Emoji‚Äù. Se n√£o aparecer, a fonte n√£o foi
reconhecida pelo <code>luaotfload</code>. Use o caminho completo no
Pandoc:</p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex -V mainfont=&quot;Latin Modern Roman&quot; -V mainfontfallback=&#39;[&quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;]&#39;</code></pre></li>
</ul>
<h4 data-number="1.2.9.3" id="teste-com-pandoc"><span class="header-section-number">1.2.9.3</span> 3. Teste com Pandoc</h4>
<p>Use um arquivo Markdown simples (<code>exemplo.md</code>):</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontfallback:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - &quot;Noto Color Emoji:mode=harf&quot;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex</code></pre>
<ul>
<li><strong>Poss√≠veis Erros:</strong>
<ul>
<li><p><strong>‚ÄúMissing character‚Äù no log:</strong> A fonte n√£o foi
encontrada. Confirme o caminho/nome da fonte.</p></li>
<li><p><strong>Emojis em preto e branco:</strong> O modo
<code>harf</code> n√£o foi aplicado. Certifique-se de usar
<code>mode=harf</code>.</p></li>
<li><p><strong>Erro de <code>luaotfload</code>:</strong> Instale pacotes
adicionais:</p>
<pre><code>pacman -S mingw-w64-x86_64-texlive-fontsextra</code></pre></li>
</ul></li>
</ul>
<h4 data-number="1.2.9.4" id="configure-o-fontconfig-opcional"><span class="header-section-number">1.2.9.4</span> 4. Configure o Fontconfig
(Opcional)</h4>
<p>Se o <code>luaotfload</code> n√£o encontrar a fonte, configure o
<code>fontconfig</code> para priorizar <code>Noto Color Emoji</code>: -
Instale o <code>fontconfig</code>:
<code>pacman -S mingw-w64-x86_64-fontconfig</code> - Crie
<code>~/.config/fontconfig/fonts.conf</code>:
<code>xml   &lt;?xml version=&quot;1.0&quot;?&gt;   &lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;   &lt;fontconfig&gt;     &lt;alias&gt;       &lt;family&gt;emoji&lt;/family&gt;       &lt;prefer&gt;         &lt;family&gt;Noto Color Emoji&lt;/family&gt;       &lt;/prefer&gt;     &lt;/alias&gt;   &lt;/fontconfig&gt;</code>
- Atualize o cache: <code>fc-cache -fv</code></p>
<h4 data-number="1.2.9.5" id="verifique-a-vers√£o-do-pandoc-e-lualatex"><span class="header-section-number">1.2.9.5</span> 5. Verifique a Vers√£o do
Pandoc e LuaLaTeX</h4>
<ul>
<li><p><strong>Pandoc:</strong> Use a vers√£o mais recente (ex.: 3.1.13).
Se instalou via MSI, confirme com:</p>
<pre><code>pandoc --version</code></pre></li>
<li><p><strong>LuaLaTeX:</strong> Confirme a instala√ß√£o:</p>
<pre><code>lualatex --version</code></pre>
<ul>
<li>Certifique-se de que o <code>luaotfload</code> est√° atualizado
(parte do <code>texlive-luatex</code>).</li>
</ul></li>
</ul>
<h4 data-number="1.2.9.6" id="depura√ß√£o-avan√ßada"><span class="header-section-number">1.2.9.6</span> 6. Depura√ß√£o Avan√ßada</h4>
<p>Se ainda n√£o funcionar: - <strong>Log do Pandoc:</strong> Adicione
<code>--verbose</code>:
<code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex --verbose</code>
Verifique mensagens sobre fontes ou emojis ausentes. - <strong>Teste
Direto no LuaLaTeX:</strong> Se o <code>teste.tex</code> acima falhar, o
problema √© no TeX, n√£o no Pandoc. - <strong>Fallback
Alternativo:</strong> Tente outra fonte emoji, como
<code>Symbola</code>:
<code>wget https://github.com/oomox/oomox/raw/master/fonts/Symbola.ttf   cp Symbola.ttf /c/Windows/Fonts/   pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex -V mainfontfallback=&#39;[&quot;Symbola:mode=harf&quot;]&#39;</code></p>
<h4 data-number="1.2.9.7" id="alternativa-use-xelatex-menor-suporte-a-emojis-coloridos"><span class="header-section-number">1.2.9.7</span> 7. Alternativa: Use XeLaTeX
(Menor Suporte a Emojis Coloridos)</h4>
<p>Se o LuaLaTeX n√£o funcionar, teste com XeLaTeX (menos confi√°vel para
emojis coloridos):</p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=xelatex -V mainfont=&quot;Noto Color Emoji&quot;</code></pre>
<ul>
<li>XeLaTeX pode n√£o renderizar emojis coloridos, mas √© um fallback
√∫til.</li>
</ul>
<h3 data-number="1.2.10" id="resumo"><span class="header-section-number">1.2.10</span> Resumo</h3>
<ul>
<li>Certifique-se de que <code>NotoColorEmoji.ttf</code> est√° em
<code>/c/Windows/Fonts/</code>.</li>
<li>Use LuaLaTeX com <code>mode=harf</code> no Pandoc.</li>
<li>Atualize o cache de fontes
(<code>luaotfload-tool -u -f</code>).</li>
<li>Configure <code>fontconfig</code> se necess√°rio.</li>
<li>Teste com um arquivo simples e verifique logs.</li>
</ul>
<p>Se ainda houver problemas, me passe: - O comando exato que voc√™ usou.
- O erro completo ou comportamento (ex.: emojis em preto e branco,
ausentes, ou erro de compila√ß√£o). - O output de
<code>pandoc --version</code> e <code>lualatex --version</code>.</p>
<p>Vamos fazer esses emojis brilharem! üò∫üöÄ</p>
<hr />
<h3 data-number="1.2.11" id="utilizador-2025-09-23-180839-grok"><span class="header-section-number">1.2.11</span> üë§ Utilizador
<em>(2025-09-23 18:08:39)</em> <em>[Grok]</em></h3>
<p>lualatex teste.tex LaTeX Error: File `fontspec.sty‚Äô not found.</p>
<hr />
<h3 data-number="1.2.12" id="grok-2025-09-23-180909-grok"><span class="header-section-number">1.2.12</span> ü§ñ Grok <em>(2025-09-23
18:09:09)</em> <em>[Grok]</em></h3>
<p>O erro <code>LaTeX Error: File &#39;fontspec.sty&#39; not found</code> indica
que o pacote <code>fontspec</code> n√£o est√° instalado no seu ambiente
TeX Live no MSYS2. O <code>fontspec</code> √© necess√°rio para carregar
fontes TrueType/OpenType (como <code>NotoColorEmoji.ttf</code>) no
LuaLaTeX, essencial para renderizar emojis coloridos. Vou te guiar para
corrigir isso no MSYS2 e garantir que a fonte
<code>Noto Color Emoji</code> funcione corretamente.</p>
<h3 data-number="1.2.13" id="passos-para-resolver"><span class="header-section-number">1.2.13</span> Passos para Resolver</h3>
<h4 data-number="1.2.13.1" id="instale-o-pacote-fontspec"><span class="header-section-number">1.2.13.1</span> 1. Instale o Pacote
<code>fontspec</code></h4>
<p>O pacote <code>fontspec</code> faz parte do TeX Live, mas pode n√£o
estar inclu√≠do no <code>mingw-w64-x86_64-texlive-core</code> ou
<code>texlive-latexextra</code>. Vamos instalar explicitamente:</p>
<ol type="1">
<li><p><strong>Atualize o MSYS2:</strong></p>
<pre><code>pacman -Syu</code></pre></li>
<li><p><strong>Instale o Pacote <code>fontspec</code>:</strong> O
<code>fontspec</code> est√° no pacote <code>texlive-latexextra</code> ou
<code>texlive-fontsextra</code>. Como voc√™ j√° instalou
<code>texlive-latexextra</code> e <code>texlive-fontsextra</code>, o
problema pode ser que o pacote espec√≠fico n√£o foi inclu√≠do corretamente.
Reinstale para garantir:</p>
<pre><code>pacman -S mingw-w64-x86_64-texlive-latexextra</code></pre>
<p>Se ainda assim n√£o funcionar, instale o pacote completo de
fontes:</p>
<pre><code>pacman -S mingw-w64-x86_64-texlive-fontsextra</code></pre></li>
<li><p><strong>Verifique a Instala√ß√£o:</strong> Confirme que o
<code>fontspec.sty</code> est√° presente:</p>
<pre><code>find / -name fontspec.sty 2&gt;/dev/null</code></pre>
<ul>
<li>No MSYS2, ele deve estar em algo como
<code>/mingw64/share/texmf-dist/tex/latex/fontspec/fontspec.sty</code>.</li>
<li>Se n√£o encontrar, o TeX Live est√° incompleto.</li>
</ul></li>
</ol>
<h4 data-number="1.2.13.2" id="teste-o-arquivo-latex-novamente"><span class="header-section-number">1.2.13.2</span> 2. Teste o Arquivo LaTeX
Novamente</h4>
<p>Use o mesmo <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={Noto Color Emoji:mode=harf}]</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<pre><code>lualatex teste.tex</code></pre>
<ul>
<li>Se ainda der erro de <code>fontspec.sty</code>, pule para o passo
3.</li>
<li>Se compilar, mas os emojis n√£o aparecerem coloridos, verifique o
passo 4.</li>
</ul>
<h4 data-number="1.2.13.3" id="instale-o-tex-live-completo-se-necess√°rio"><span class="header-section-number">1.2.13.3</span> 3. Instale o TeX Live
Completo (Se Necess√°rio)</h4>
<p>Se o <code>fontspec</code> ainda n√£o for encontrado, o TeX Live pode
estar incompleto no MSYS2. Instale a cole√ß√£o completa:</p>
<pre><code>pacman -S mingw-w64-x86_64-texlive-full</code></pre>
<ul>
<li><strong>Aviso:</strong> Isso instala ~4GB de pacotes, mas garante
todos os pacotes LaTeX, incluindo <code>fontspec</code> e
<code>luaotfload</code>.</li>
<li>Ap√≥s instalar, reteste o <code>lualatex teste.tex</code>.</li>
</ul>
<h4 data-number="1.2.13.4" id="verifique-a-fonte-noto-color-emoji"><span class="header-section-number">1.2.13.4</span> 4. Verifique a Fonte
<code>Noto Color Emoji</code></h4>
<p>Certifique-se de que a fonte est√° acess√≠vel: - Confirme que
<code>NotoColorEmoji.ttf</code> est√° em <code>/c/Windows/Fonts/</code>:
<code>ls /c/Windows/Fonts/NotoColorEmoji.ttf</code> - Atualize o cache
de fontes do <code>luaotfload</code>: <code>luaotfload-tool -u -f</code>
- Liste fontes dispon√≠veis para confirmar:
<code>luaotfload-tool --list=names | grep Noto</code> - Deve mostrar
‚ÄúNoto Color Emoji‚Äù. Se n√£o, use o caminho completo no
<code>teste.tex</code>:
<code>latex     \setmainfont{Latin Modern Roman}[RawFeature={+fallback},Fallback={file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf}]</code></p>
<h4 data-number="1.2.13.5" id="teste-com-pandoc-1"><span class="header-section-number">1.2.13.5</span> 5. Teste com Pandoc</h4>
<p>Se o <code>teste.tex</code> funcionar, volte ao Pandoc. Use o
Markdown (<code>exemplo.md</code>):</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontfallback:</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - &quot;Noto Color Emoji:mode=harf&quot;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<pre><code>pandoc exemplo.md -o exemplo.pdf --pdf-engine=lualatex</code></pre>
<ul>
<li><p>Se der erro relacionado a <code>fontspec</code>, o Pandoc n√£o
est√° usando o TeX Live do MSYS2. Confirme o PATH:</p>
<pre><code>echo $PATH</code></pre>
<ul>
<li><p>Deve incluir <code>/mingw64/bin</code>. Se n√£o, adicione em
<code>~/.bashrc</code>:</p>
<pre><code>export PATH=&quot;/mingw64/bin:$PATH&quot;</code></pre></li>
</ul></li>
</ul>
<h4 data-number="1.2.13.6" id="solu√ß√£o-de-problemas-adicional"><span class="header-section-number">1.2.13.6</span> 6. Solu√ß√£o de Problemas
Adicional</h4>
<ul>
<li><p><strong>Erro Persistente de <code>fontspec.sty</code>:</strong>
Se o <code>texlive-latexextra</code> ou <code>texlive-full</code> n√£o
resolver, pode ser um problema de reposit√≥rio. Edite
<code>/etc/pacman.conf</code> e verifique se o reposit√≥rio
<code>[mingw64]</code> est√° ativo. Reinstale:</p>
<pre><code>pacman -Syy mingw-w64-x86_64-texlive-latexextra</code></pre></li>
<li><p><strong>Emojis em Preto e Branco:</strong> Confirme que
<code>mode=harf</code> est√° no comando ou YAML. Sem <code>harf</code>,
emojis podem aparecer monocrom√°ticos.</p></li>
<li><p><strong>Log do LuaLaTeX:</strong> Veja o arquivo
<code>teste.log</code> ap√≥s compilar <code>lualatex teste.tex</code>
para erros sobre fontes ausentes.</p></li>
<li><p><strong>Alternativa Manual:</strong> Baixe
<code>fontspec.sty</code> manualmente de <a href="https://ctan.org/pkg/fontspec">ctan.org/pkg/fontspec</a> e coloque
em <code>~/texmf/tex/latex/fontspec/</code>:</p>
<pre><code>mkdir -p ~/texmf/tex/latex/fontspec
wget -O ~/texmf/tex/latex/fontspec/fontspec.sty https://mirrors.ctan.org/macros/latex/contrib/fontspec/fontspec.sty</code></pre></li>
</ul>
<h4 data-number="1.2.13.7" id="alternativa-instale-tex-live-fora-do-msys2"><span class="header-section-number">1.2.13.7</span> 7. Alternativa: Instale
TeX Live Fora do MSYS2</h4>
<p>Se o TeX Live do MSYS2 continuar problem√°tico, instale o TeX Live
oficial para Windows: 1. Baixe em <a href="https://tug.org/texlive/acquire-netinstall.html">tug.org/texlive</a>.
2. Instale e adicione ao PATH no MSYS2 (<code>~/.bashrc</code>):
<code>export PATH=&quot;/c/Program Files/TeXLive/2025/bin/win32:$PATH&quot;</code>
3. Reexecute o Pandoc ou <code>lualatex</code>.</p>
<h3 data-number="1.2.14" id="resumo-1"><span class="header-section-number">1.2.14</span> Resumo</h3>
<ul>
<li>Instale <code>fontspec</code> via
<code>pacman -S mingw-w64-x86_64-texlive-latexextra</code> ou
<code>texlive-full</code>.</li>
<li>Confirme que <code>NotoColorEmoji.ttf</code> est√° em
<code>/c/Windows/Fonts/</code> e no cache do
<code>luaotfload</code>.</li>
<li>Teste com <code>lualatex teste.tex</code> e depois com Pandoc.</li>
<li>Verifique logs para erros espec√≠ficos.</li>
</ul>
<p>Se o erro persistir, compartilhe: - O output completo de
<code>lualatex teste.tex</code>. - Resultado de
<code>luaotfload-tool --list=names | grep Noto</code>. - Confirma√ß√£o de
quais pacotes TeX Live est√£o instalados
(<code>pacman -Qs texlive</code>).</p>
<p>Vamos fazer esses emojis üò∫üöÄ aparecerem coloridos!</p>
<hr />
<h3 data-number="1.2.15" id="utilizador-2025-09-23-181030-grok"><span class="header-section-number">1.2.15</span> üë§ Utilizador
<em>(2025-09-23 18:10:30)</em> <em>[Grok]</em></h3>
<p>pacman -S mingw-w64-x86_64-texlive-latexextra error: target not
found: mingw-w64-x86_64-texlive-latexextra</p>
<hr />
<h3 data-number="1.2.16" id="grok-2025-09-23-181108-grok"><span class="header-section-number">1.2.16</span> ü§ñ Grok <em>(2025-09-23
18:11:08)</em> <em>[Grok]</em></h3>
<p>The error
<code>error: target not found: mingw-w64-x86_64-texlive-latexextra</code>
indicates that the package
<code>mingw-w64-x86_64-texlive-latexextra</code> is not available in the
MSYS2 repositories. This could be due to a missing or misconfigured
repository, an outdated package database, or the package not being
provided in the MinGW64 environment. Since you‚Äôre trying to get
<code>fontspec.sty</code> (required for <code>NotoColorEmoji.ttf</code>
support in LuaLaTeX) and ultimately use emojis with Pandoc, let‚Äôs
resolve this step-by-step with alternative approaches tailored to MSYS2
in September 2025.</p>
<h3 data-number="1.2.17" id="step-by-step-solution"><span class="header-section-number">1.2.17</span> Step-by-Step Solution</h3>
<h4 data-number="1.2.17.1" id="update-and-sync-msys2-repositories"><span class="header-section-number">1.2.17.1</span> 1. Update and Sync MSYS2
Repositories</h4>
<p>Ensure your package database is up-to-date, as the error might stem
from an outdated repository index:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-Syu</span></span></code></pre></div>
<ul>
<li>If prompted, close and reopen the MSYS2 terminal, then run
<code>pacman -Syu</code> again to complete the update.</li>
<li>This ensures you have the latest package lists.</li>
</ul>
<h4 data-number="1.2.17.2" id="check-available-tex-live-packages"><span class="header-section-number">1.2.17.2</span> 2. Check Available TeX
Live Packages</h4>
<p>The <code>texlive-latexextra</code> package might not exist under the
exact name or may be part of a different package group in MSYS2. List
available TeX Live packages:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-Ss</span> texlive</span></code></pre></div>
<p>Look for packages like: - <code>mingw-w64-x86_64-texlive-core</code>
- <code>mingw-w64-x86_64-texlive-bin</code> -
<code>mingw-w64-x86_64-texlive-fontsextra</code> -
<code>mingw-w64-x86_64-texlive-full</code> (if available)</p>
<p>If you see a package like
<code>mingw-w64-x86_64-texlive-fonts-extra</code> or similar, try
installing it:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-S</span> mingw-w64-x86_64-texlive-fonts-extra</span></code></pre></div>
<p>Alternatively, install the core TeX Live package, which includes
essentials:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-S</span> mingw-w64-x86_64-texlive-core</span></code></pre></div>
<h4 data-number="1.2.17.3" id="install-fontspec-via-texlive-full-comprehensive-solution"><span class="header-section-number">1.2.17.3</span> 3. Install
<code>fontspec</code> via <code>texlive-full</code> (Comprehensive
Solution)</h4>
<p>Since <code>texlive-latexextra</code> is unavailable, the most
reliable way to get <code>fontspec.sty</code> is to install the full TeX
Live distribution, which includes all necessary packages (including
<code>fontspec</code> and <code>luaotfload</code> for emoji
support):</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-S</span> mingw-w64-x86_64-texlive-full</span></code></pre></div>
<ul>
<li><strong>Warning</strong>: This package is large (~4GB), but it
guarantees all LaTeX dependencies.</li>
<li>If <code>texlive-full</code> is also not found, proceed to the next
step for an alternative.</li>
</ul>
<h4 data-number="1.2.17.4" id="verify-fontspec-installation"><span class="header-section-number">1.2.17.4</span> 4. Verify
<code>fontspec</code> Installation</h4>
<p>After installing a TeX Live package, check if
<code>fontspec.sty</code> is present:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> / <span class="at">-name</span> fontspec.sty <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span></code></pre></div>
<ul>
<li>Expected location:
<code>/mingw64/share/texmf-dist/tex/latex/fontspec/fontspec.sty</code>.</li>
<li>If found, proceed to test LuaLaTeX (Step 6).</li>
<li>If not found, try the next step.</li>
</ul>
<h4 data-number="1.2.17.5" id="alternative-install-tex-live-manually-outside-msys2"><span class="header-section-number">1.2.17.5</span> 5. Alternative: Install
TeX Live Manually (Outside MSYS2)</h4>
<p>If MSYS2‚Äôs TeX Live packages are incomplete or unavailable, install
the official TeX Live distribution for Windows, which is more reliable
for complex LaTeX setups (like emoji support):</p>
<ol type="1">
<li><p><strong>Download TeX Live</strong>:</p>
<ul>
<li><p>Go to <a href="https://tug.org/texlive/acquire-netinstall.html">tug.org/texlive/acquire-netinstall.html</a>
and download the installer
(<code>install-tl-windows.exe</code>).</p></li>
<li><p>Or, use <code>curl</code> in MSYS2:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> install-tl.zip</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-<span class="pp">*</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="ex">./install-tl-windows.bat</span></span></code></pre></div></li>
<li><p>Follow the installer prompts (default settings are
fine).</p></li>
</ul></li>
<li><p><strong>Add TeX Live to PATH</strong>: After installation
(typically in <code>C:\texlive\2025</code>), add it to your MSYS2 PATH
in <code>~/.bashrc</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/c/texlive/2025/bin/win32:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div></li>
<li><p><strong>Verify</strong>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> <span class="at">--version</span></span></code></pre></div></li>
</ol>
<h4 data-number="1.2.17.6" id="test-lualatex-with-noto-color-emoji"><span class="header-section-number">1.2.17.6</span> 6. Test LuaLaTeX with
<code>Noto Color Emoji</code></h4>
<p>Ensure <code>NotoColorEmoji.ttf</code> is in
<code>/c/Windows/Fonts/</code> (as per previous steps):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<p>Create a test file (<code>teste.tex</code>):</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={Noto Color Emoji:mode=harf}]</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>If it compiles and shows color emojis in <code>teste.pdf</code>,
you‚Äôre set.</p></li>
<li><p>If it fails with <code>fontspec.sty not found</code>,
double-check the TeX Live installation.</p></li>
<li><p>If emojis are black-and-white or missing, update the font
cache:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>And verify the font is recognized:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.17.7" id="test-pandoc-with-emojis"><span class="header-section-number">1.2.17.7</span> 7. Test Pandoc with
Emojis</h4>
<p>Use a Markdown file (<code>exemplo.md</code>):</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontfallback:</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - &quot;Noto Color Emoji:mode=harf&quot;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Convert:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>If it fails, check the log with <code>--verbose</code>:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.17.8" id="fallback-manual-fontspec-installation"><span class="header-section-number">1.2.17.8</span> 8. Fallback: Manual
<code>fontspec</code> Installation</h4>
<p>If <code>fontspec.sty</code> is still missing, download it manually
from CTAN:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/texmf/tex/latex/fontspec</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="at">-O</span> ~/texmf/tex/latex/fontspec/fontspec.sty https://mirrors.ctan.org/macros/latex/contrib/fontspec/fontspec.sty</span></code></pre></div>
<p>Retry <code>lualatex teste.tex</code>.</p>
<h4 data-number="1.2.17.9" id="troubleshooting"><span class="header-section-number">1.2.17.9</span> 9. Troubleshooting</h4>
<ul>
<li><p><strong>Repository Issue</strong>: If
<code>pacman -Ss texlive</code> shows no relevant packages, your MSYS2
repository might be misconfigured. Edit <code>/etc/pacman.conf</code>
and ensure the <code>[mingw64]</code> section is enabled:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[mingw64]</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Include </span><span class="ot">=</span><span class="st"> /etc/pacman.d/mirrorlist.mingw64</span></span></code></pre></div>
<p>Then sync:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-Syy</span></span></code></pre></div></li>
<li><p><strong>PATH Issues</strong>: Ensure <code>lualatex</code> is
accessible:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<p>Should point to <code>/mingw64/bin/lualatex</code> or
<code>/c/texlive/2025/bin/win32/lualatex</code>.</p></li>
<li><p><strong>Font Not Found</strong>: If <code>Noto Color Emoji</code>
isn‚Äôt recognized, use the full path:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontfallback:</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>&quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span></code></pre></div></li>
</ul>
<h3 data-number="1.2.18" id="summary"><span class="header-section-number">1.2.18</span> Summary</h3>
<ul>
<li>The package <code>mingw-w64-x86_64-texlive-latexextra</code> isn‚Äôt
available, so try <code>texlive-core</code>,
<code>texlive-fonts-extra</code>, or <code>texlive-full</code>.</li>
<li>Alternatively, install TeX Live manually for Windows.</li>
<li>Ensure <code>NotoColorEmoji.ttf</code> is in
<code>/c/Windows/Fonts/</code> and update the <code>luaotfload</code>
cache.</li>
<li>Test with <code>lualatex</code> first, then Pandoc.</li>
</ul>
<p>If the issue persists, please share: - Output of
<code>pacman -Ss texlive</code>. - Output of
<code>lualatex teste.tex</code> (full error log). - Confirmation of
<code>NotoColorEmoji.ttf</code> in <code>/c/Windows/Fonts/</code>. -
Output of <code>pandoc --version</code> and
<code>lualatex --version</code>.</p>
<p>Let‚Äôs get those üò∫üöÄ emojis working!</p>
<hr />
<h3 data-number="1.2.19" id="utilizador-2025-09-23-183927-grok"><span class="header-section-number">1.2.19</span> üë§ Utilizador
<em>(2025-09-23 18:39:27)</em> <em>[Grok]</em></h3>
<p>continua o erro LaTeX Error: File `fontspec.sty‚Äô not found.</p>
<hr />
<h3 data-number="1.2.20" id="grok-2025-09-23-184015-grok"><span class="header-section-number">1.2.20</span> ü§ñ Grok <em>(2025-09-23
18:40:15)</em> <em>[Grok]</em></h3>
<p>O erro persistente
<code>LaTeX Error: File &#39;fontspec.sty&#39; not found</code> indica que,
mesmo ap√≥s tentativas de instalar pacotes TeX Live no MSYS2, o pacote
<code>fontspec</code> ainda n√£o est√° dispon√≠vel no seu ambiente. Como o
pacote <code>mingw-w64-x86_64-texlive-latexextra</code> n√£o foi
encontrado e a instala√ß√£o do <code>texlive-full</code> pode n√£o ter
funcionado como esperado, vou te guiar por uma solu√ß√£o definitiva,
focando em instalar o TeX Live corretamente no MSYS2 ou diretamente no
Windows, garantindo que o <code>fontspec.sty</code> esteja presente e
que a fonte <code>NotoColorEmoji.ttf</code> funcione com Pandoc e
LuaLaTeX. Como voc√™ est√° no MSYS2 e quer suporte a emojis coloridos,
vamos abordar isso de forma clara e pr√°tica, considerando o contexto de
setembro de 2025.</p>
<h3 data-number="1.2.21" id="passos-para-resolver-1"><span class="header-section-number">1.2.21</span> Passos para Resolver</h3>
<h4 data-number="1.2.21.1" id="confirme-o-estado-atual-do-tex-live-no-msys2"><span class="header-section-number">1.2.21.1</span> 1. Confirme o Estado Atual
do TeX Live no MSYS2</h4>
<p>Primeiro, vamos verificar quais pacotes TeX Live est√£o instalados e
se h√° algo quebrado:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-Qs</span> texlive</span></code></pre></div>
<ul>
<li>Isso lista todos os pacotes TeX Live instalados (ex.:
<code>mingw-w64-x86_64-texlive-core</code>, <code>texlive-bin</code>,
etc.).</li>
<li>Se nada aparecer ou apenas pacotes parciais estiverem listados, o
TeX Live est√° incompleto.</li>
</ul>
<p>Tente reinstalar os pacotes b√°sicos:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pacman</span> <span class="at">-S</span> mingw-w64-x86_64-texlive-core mingw-w64-x86_64-texlive-bin mingw-w64-x86_64-texlive-luatex</span></code></pre></div>
<ul>
<li>Se <code>pacman -S mingw-w64-x86_64-texlive-full</code> tamb√©m
falhar (como o <code>latexextra</code>), pule para a instala√ß√£o manual
do TeX Live (Passo 3).</li>
</ul>
<h4 data-number="1.2.21.2" id="verifique-o-fontspec.sty"><span class="header-section-number">1.2.21.2</span> 2. Verifique o
<code>fontspec.sty</code></h4>
<p>Procure manualmente o arquivo <code>fontspec.sty</code> para
confirmar se ele est√° no sistema:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> / <span class="at">-name</span> fontspec.sty <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span></code></pre></div>
<ul>
<li><strong>Esperado</strong>: Algo como
<code>/mingw64/share/texmf-dist/tex/latex/fontspec/fontspec.sty</code>.</li>
<li><strong>Se n√£o encontrado</strong>: O pacote necess√°rio n√£o foi
instalado. Vamos instalar o TeX Live completo manualmente.</li>
</ul>
<h4 data-number="1.2.21.3" id="instale-o-tex-live-oficial-solu√ß√£o-recomendada"><span class="header-section-number">1.2.21.3</span> 3. Instale o TeX Live
Oficial (Solu√ß√£o Recomendada)</h4>
<p>Como os pacotes TeX Live no MSYS2 parecem estar indispon√≠veis ou
incompletos (baseado nos erros <code>target not found</code>), a
abordagem mais confi√°vel √© instalar o TeX Live diretamente do site
oficial, que √© compat√≠vel com o MSYS2 e inclui o
<code>fontspec.sty</code>. Isso √© especialmente √∫til para garantir
suporte a <code>luaotfload</code> e fontes como
<code>Noto Color Emoji</code>.</p>
<ol type="1">
<li><p><strong>Baixe o Instalador do TeX Live</strong>:</p>
<ul>
<li><p>Acesse <a href="https://tug.org/texlive/acquire-netinstall.html">tug.org/texlive/acquire-netinstall.html</a>
e baixe o instalador para Windows
(<code>install-tl-windows.exe</code>).</p></li>
<li><p>Ou, no terminal MSYS2:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> install-tl.zip</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-<span class="pp">*</span></span></code></pre></div></li>
</ul></li>
<li><p><strong>Instale o TeX Live</strong>:</p>
<ul>
<li><p>Execute o instalador:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./install-tl-windows.bat</span></span></code></pre></div></li>
<li><p>No instalador gr√°fico, escolha a instala√ß√£o ‚Äúcompleta‚Äù (ou pelo
menos inclua as cole√ß√µes <code>latex</code>, <code>luatex</code>, e
<code>fonts-extra</code>).</p></li>
<li><p>O destino padr√£o √© <code>C:\texlive\2025</code>.</p></li>
</ul></li>
<li><p><strong>Adicione ao PATH no MSYS2</strong>: Edite
<code>~/.bashrc</code> (use <code>nano ~/.bashrc</code>):</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/c/texlive/2025/bin/win32:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div></li>
<li><p><strong>Verifique a Instala√ß√£o</strong>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>Isso deve mostrar a vers√£o do TeX Live 2025.</p></li>
<li><p>Confirme o <code>fontspec.sty</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> /c/texlive/2025 <span class="at">-name</span> fontspec.sty</span></code></pre></div>
<ul>
<li>Esperado: Algo como
<code>/c/texlive/2025/texmf-dist/tex/latex/fontspec/fontspec.sty</code>.</li>
</ul></li>
</ul></li>
</ol>
<h4 data-number="1.2.21.4" id="teste-o-lualatex-com-fontspec"><span class="header-section-number">1.2.21.4</span> 4. Teste o LuaLaTeX com
<code>fontspec</code></h4>
<p>Crie novamente o arquivo <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={Noto Color Emoji:mode=harf}]</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p><strong>Se funcionar</strong>: O PDF (<code>teste.pdf</code>)
deve mostrar emojis coloridos.</p></li>
<li><p><strong>Se der erro <code>fontspec.sty not found</code></strong>:
O TeX Live n√£o foi instalado corretamente. Reinstale ou verifique o
PATH.</p></li>
<li><p><strong>Se emojis n√£o forem coloridos</strong>: Atualize o cache
de fontes:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.21.5" id="confirme-a-fonte-noto-color-emoji"><span class="header-section-number">1.2.21.5</span> 5. Confirme a Fonte
<code>Noto Color Emoji</code></h4>
<p>Certifique-se de que <code>NotoColorEmoji.ttf</code> est√°
instalada:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<ul>
<li><p>Se n√£o estiver, baixe novamente:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
<li><p>Atualize o cache de fontes:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p>Verifique se a fonte √© reconhecida:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li><p>Se n√£o aparecer, use o caminho completo no
<code>teste.tex</code>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf}]</span></code></pre></div></li>
</ul></li>
</ul>
<h4 data-number="1.2.21.6" id="teste-com-pandoc-2"><span class="header-section-number">1.2.21.6</span> 6. Teste com Pandoc</h4>
<p>Use o arquivo Markdown (<code>exemplo.md</code>):</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontfallback:</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - &quot;Noto Color Emoji:mode=harf&quot;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p><strong>Se der erro</strong>: Adicione <code>--verbose</code>
para depurar:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.21.7" id="solu√ß√£o-manual-para-fontspec.sty"><span class="header-section-number">1.2.21.7</span> 7. Solu√ß√£o Manual para
<code>fontspec.sty</code></h4>
<p>Se o TeX Live ainda n√£o funcionar, instale o <code>fontspec</code>
manualmente:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/texmf/tex/latex/fontspec</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> ~/texmf/tex/latex/fontspec/fontspec.sty https://mirrors.ctan.org/macros/latex/contrib/fontspec/fontspec.sty</span></code></pre></div>
<ul>
<li>Reexecute <code>lualatex teste.tex</code>.</li>
</ul>
<h4 data-number="1.2.21.8" id="depura√ß√£o-adicional"><span class="header-section-number">1.2.21.8</span> 8. Depura√ß√£o
Adicional</h4>
<ul>
<li><p><strong>Log do LuaLaTeX</strong>: Verifique
<code>teste.log</code> ap√≥s compilar para erros detalhados.</p></li>
<li><p><strong>PATH do TeX Live</strong>: Confirme que
<code>lualatex</code> est√° no PATH:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li>Deve apontar para <code>/c/texlive/2025/bin/win32/lualatex</code> ou
<code>/mingw64/bin/lualatex</code>.</li>
</ul></li>
<li><p><strong>Reinstale o Pandoc</strong>: Se o Pandoc n√£o encontrar o
LuaLaTeX, reinstale via MSI:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> pandoc.msi https://github.com/jgm/pandoc/releases/latest/download/pandoc-3.1.13-windows-x86_64.msi</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="ex">msiexec</span> /i pandoc.msi /quiet</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.21.9" id="alternativa-use-xelatex"><span class="header-section-number">1.2.21.9</span> 9. Alternativa: Use
XeLaTeX</h4>
<p>Se o LuaLaTeX continuar falhando, teste com XeLaTeX (menos ideal para
emojis coloridos):</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>xelatex <span class="at">-V</span> mainfont=<span class="st">&quot;Noto Color Emoji&quot;</span></span></code></pre></div>
<h3 data-number="1.2.22" id="resumo-2"><span class="header-section-number">1.2.22</span> Resumo</h3>
<ul>
<li>O erro <code>fontspec.sty not found</code> ocorre porque o TeX Live
no MSYS2 est√° incompleto.</li>
<li>Instale o TeX Live oficial para Windows e adicione ao PATH.</li>
<li>Confirme que <code>NotoColorEmoji.ttf</code> est√° em
<code>/c/Windows/Fonts/</code> e no cache do
<code>luaotfload</code>.</li>
<li>Teste com <code>lualatex teste.tex</code> antes de usar Pandoc.</li>
</ul>
<p>Por favor, compartilhe: - O output de
<code>pacman -Qs texlive</code>. - O resultado de
<code>find / -name fontspec.sty 2&gt;/dev/null</code>. - O log completo
de <code>lualatex teste.tex</code> (se ainda der erro). - Confirma√ß√£o de
<code>pandoc --version</code> e <code>lualatex --version</code>.</p>
<p>Vamos resolver isso e fazer os emojis üò∫üöÄ aparecerem coloridos!</p>
<hr />
<h3 data-number="1.2.23" id="utilizador-2025-09-23-201559-grok"><span class="header-section-number">1.2.23</span> üë§ Utilizador
<em>(2025-09-23 20:15:59)</em> <em>[Grok]</em></h3>
<p>lualatex teste.tex d√° luatex/luaotfload/luaotfload-fallback.lua:81:
Unknown fallback table true. <to be read again> relax l.3
‚Ä¶ack},Fallback={Noto Color Emoji:mode=harf}</p>
<hr />
<h3 data-number="1.2.24" id="grok-2025-09-23-201648-grok"><span class="header-section-number">1.2.24</span> ü§ñ Grok <em>(2025-09-23
20:16:48)</em> <em>[Grok]</em></h3>
<p>O erro que voc√™ est√° enfrentando ao executar
<code>lualatex teste.tex</code>:</p>
<pre><code>luatex/luaotfload/luaotfload-fallback.lua:81: Unknown fallback table true.
&lt;to be read again&gt;
                   relax
l.3 ...ack},Fallback={Noto Color Emoji:mode=harf}</code></pre>
<p>indica um problema com a sintaxe da configura√ß√£o do
<code>fontspec</code> no arquivo <code>teste.tex</code>, especificamente
na defini√ß√£o do fallback para a fonte <code>Noto Color Emoji</code>. O
erro ocorre porque o LuaLaTeX (via <code>luaotfload</code>) n√£o est√°
interpretando corretamente a op√ß√£o <code>Fallback</code> no comando
<code>\setmainfont</code>. Isso pode ser devido a uma sintaxe incorreta
ou a um problema com a vers√£o do <code>luaotfload</code> ou do TeX Live
no MSYS2. Vamos corrigir isso passo a passo, garantindo que o
<code>NotoColorEmoji.ttf</code> funcione para renderizar emojis
coloridos no PDF gerado pelo Pandoc no ambiente MSYS2.</p>
<h3 data-number="1.2.25" id="an√°lise-do-erro"><span class="header-section-number">1.2.25</span> An√°lise do Erro</h3>
<p>O trecho problem√°tico no <code>teste.tex</code> √©:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={+fallback},Fallback={Noto Color Emoji:mode=harf}]</span></code></pre></div>
<p>O erro sugere que o <code>luaotfload</code> n√£o reconhece a op√ß√£o
<code>Fallback={Noto Color Emoji:mode=harf}</code> ou que a sintaxe est√°
malformada. A op√ß√£o <code>RawFeature={+fallback}</code> √© usada para
ativar o mecanismo de fallback, mas o formato do <code>Fallback</code>
pode n√£o estar correto para a vers√£o do <code>luaotfload</code>
instalada. Al√©m disso, o suporte a emojis coloridos requer que o
<code>Noto Color Emoji</code> esteja corretamente instalado e acess√≠vel,
e que o modo <code>harf</code> (HarfBuzz renderer) seja suportado.</p>
<h3 data-number="1.2.26" id="passos-para-corrigir"><span class="header-section-number">1.2.26</span> Passos para Corrigir</h3>
<h4 data-number="1.2.26.1" id="corrija-a-sintaxe-do-teste.tex"><span class="header-section-number">1.2.26.1</span> 1. Corrija a Sintaxe do
<code>teste.tex</code></h4>
<p>A sintaxe do <code>Fallback</code> pode estar incorreta. O
<code>fontspec</code> com <code>luaotfload</code> espera uma
configura√ß√£o espec√≠fica para fontes de fallback. Vamos ajustar o arquivo
<code>teste.tex</code> para uma sintaxe mais robusta:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p><strong>Mudan√ßas</strong>: - Substitu√≠
<code>Fallback={Noto Color Emoji:mode=harf}</code> por uma chamada
expl√≠cita a <code>\fontspec{Noto Color Emoji}[Renderer=HarfBuzz]</code>.
- O <code>Renderer=HarfBuzz</code> √© a forma padr√£o de especificar o
modo <code>harf</code> no <code>fontspec</code>.</p>
<p>Salve o arquivo e compile:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<h4 data-number="1.2.26.2" id="verifique-a-instala√ß√£o-do-noto-color-emoji"><span class="header-section-number">1.2.26.2</span> 2. Verifique a Instala√ß√£o
do <code>Noto Color Emoji</code></h4>
<p>Certifique-se de que a fonte <code>NotoColorEmoji.ttf</code> est√°
instalada e reconhecida pelo <code>luaotfload</code>:</p>
<ul>
<li><p>Confirme a presen√ßa da fonte:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<ul>
<li><p>Se n√£o estiver, baixe novamente:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
</ul></li>
<li><p>Atualize o cache de fontes:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p>Verifique se a fonte est√° listada:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li><p>Deve mostrar algo como <code>Noto Color Emoji</code>. Se n√£o
aparecer, use o caminho completo no <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div></li>
</ul></li>
</ul>
<h4 data-number="1.2.26.3" id="confirme-a-vers√£o-do-luaotfload"><span class="header-section-number">1.2.26.3</span> 3. Confirme a Vers√£o do
<code>luaotfload</code></h4>
<p>O erro pode estar relacionado a uma vers√£o antiga ou incompat√≠vel do
<code>luaotfload</code>. Verifique a vers√£o:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>A vers√£o deve ser recente (ex.: <code>luaotfload 3.x</code> ou
superior, compat√≠vel com TeX Live 2025).</p></li>
<li><p>Se estiver desatualizado, atualize o TeX Live. Como os pacotes
<code>texlive</code> no MSYS2 parecem limitados (baseado nos erros
anteriores), use o TeX Live oficial instalado manualmente (conforme
sugerido antes):</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> update <span class="at">--self</span> <span class="at">--all</span></span></code></pre></div>
<ul>
<li>Certifique-se de que o <code>tlmgr</code> est√° no PATH (ex.:
<code>/c/texlive/2025/bin/win32/tlmgr</code>).</li>
<li>Se o TeX Live n√£o estiver instalado, siga o Passo 4.</li>
</ul></li>
</ul>
<h4 data-number="1.2.26.4" id="reinstale-o-tex-live-oficial-se-necess√°rio"><span class="header-section-number">1.2.26.4</span> 4. Reinstale o TeX Live
Oficial (Se Necess√°rio)</h4>
<p>Como os pacotes <code>mingw-w64-x86_64-texlive-latexextra</code> e
outros n√£o est√£o dispon√≠veis no MSYS2, a instala√ß√£o manual do TeX Live √©
a melhor solu√ß√£o:</p>
<ol type="1">
<li><p><strong>Baixe e Instale</strong>:</p>
<ul>
<li><p>Acesse <a href="https://tug.org/texlive/acquire-netinstall.html">tug.org/texlive/acquire-netinstall.html</a>
e baixe <code>install-tl-windows.exe</code>.</p></li>
<li><p>Ou, no MSYS2:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> install-tl.zip</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-<span class="pp">*</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="ex">./install-tl-windows.bat</span></span></code></pre></div></li>
<li><p>Escolha a instala√ß√£o completa ou inclua as cole√ß√µes
<code>latex</code>, <code>luatex</code>, e
<code>fonts-extra</code>.</p></li>
</ul></li>
<li><p><strong>Adicione ao PATH</strong>: Edite
<code>~/.bashrc</code>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/c/texlive/2025/bin/win32:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div></li>
<li><p><strong>Verifique</strong>:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> <span class="at">--version</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> /c/texlive/2025 <span class="at">-name</span> fontspec.sty</span></code></pre></div></li>
</ol>
<h4 data-number="1.2.26.5" id="teste-com-pandoc-3"><span class="header-section-number">1.2.26.5</span> 5. Teste com Pandoc</h4>
<p>Ap√≥s corrigir o <code>teste.tex</code>, aplique a mesma l√≥gica ao
Pandoc. Crie <code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=+fallback</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - Fallback=\fontspec{Noto Color Emoji}[Renderer=HarfBuzz]</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Se der erro, use o caminho completo da fonte:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>RawFeature=+fallback</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Fallback=\fontspec{file:/c/Windows/Fonts/NotoColorEmoji.ttf}<span class="co">[</span><span class="ot">Renderer=HarfBuzz</span><span class="co">]</span></span></code></pre></div></li>
<li><p>Adicione <code>--verbose</code> para depurar:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.26.6" id="depura√ß√£o-adicional-1"><span class="header-section-number">1.2.26.6</span> 6. Depura√ß√£o
Adicional</h4>
<ul>
<li><p><strong>Log do LuaLaTeX</strong>: Ap√≥s
<code>lualatex teste.tex</code>, verifique <code>teste.log</code> para
erros detalhados (ex.: fonte n√£o encontrada).</p></li>
<li><p><strong>Vers√£o do Pandoc</strong>: Confirme:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>Deve ser ~3.1.13 ou superior. Se necess√°rio, reinstale via
MSI:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> pandoc.msi https://github.com/jgm/pandoc/releases/latest/download/pandoc-3.1.13-windows-x86_64.msi</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="ex">msiexec</span> /i pandoc.msi /quiet</span></code></pre></div></li>
</ul></li>
<li><p><strong>Erro Persistente no <code>luaotfload</code></strong>:</p>
<ul>
<li><p>Se o <code>luaotfload</code> continuar falhando, tente uma fonte
alternativa (ex.: <code>Symbola</code>):</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> Symbola.ttf https://github.com/oomox/oomox/raw/master/fonts/Symbola.ttf</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> Symbola.ttf /c/Windows/Fonts/</span></code></pre></div>
<p>Atualize o <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{Symbola}[Renderer=HarfBuzz]</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div></li>
</ul></li>
</ul>
<h4 data-number="1.2.26.7" id="alternativa-simplifique-o-teste"><span class="header-section-number">1.2.26.7</span> 7. Alternativa:
Simplifique o Teste</h4>
<p>Se o fallback ainda falhar, teste apenas com
<code>Noto Color Emoji</code> como fonte principal (para isolar o
problema):</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>üò∫üöÄ</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li>Se funcionar, o problema √© espec√≠fico do mecanismo de fallback.</li>
</ul>
<h3 data-number="1.2.27" id="resumo-3"><span class="header-section-number">1.2.27</span> Resumo</h3>
<ul>
<li>O erro √© causado por uma sintaxe incorreta no <code>Fallback</code>.
Use <code>\fontspec{Noto Color Emoji}[Renderer=HarfBuzz]</code>.</li>
<li>Confirme que <code>NotoColorEmoji.ttf</code> est√° em
<code>/c/Windows/Fonts/</code> e no cache do
<code>luaotfload</code>.</li>
<li>Instale o TeX Live oficial se os pacotes MSYS2 continuarem
falhando.</li>
<li>Teste com <code>lualatex</code> antes de voltar ao Pandoc.</li>
</ul>
<p>Por favor, compartilhe: - O output completo de
<code>lualatex teste.tex</code> (incluindo o <code>teste.log</code>, se
poss√≠vel). - Resultado de
<code>luaotfload-tool --list=names | grep Noto</code>. - Output de
<code>lualatex --version</code> e <code>pandoc --version</code>.</p>
<p>Vamos fazer esses emojis üò∫üöÄ brilharem coloridos no seu PDF!</p>
<hr />
<h3 data-number="1.2.28" id="utilizador-2025-09-23-202054-grok"><span class="header-section-number">1.2.28</span> üë§ Utilizador
<em>(2025-09-23 20:20:54)</em> <em>[Grok]</em></h3>
<p>agora temos: luatex/luaotfload/luaotfload-fallback.lua:81: Unknown
fallback table true. <to be read again> relax l.8 ]</p>
<hr />
<h3 data-number="1.2.29" id="grok-2025-09-23-202143-grok"><span class="header-section-number">1.2.29</span> ü§ñ Grok <em>(2025-09-23
20:21:43)</em> <em>[Grok]</em></h3>
<p>O erro que voc√™ est√° enfrentando:</p>
<pre><code>luatex/luaotfload/luaotfload-fallback.lua:81: Unknown fallback table true.
&lt;to be read again&gt;
                   relax
l.8 ]</code></pre>
<p>indica que o problema persiste na configura√ß√£o do mecanismo de
fallback no <code>fontspec</code> dentro do arquivo
<code>teste.tex</code>. A mensagem sugere que o <code>luaotfload</code>
(parte do LuaLaTeX) n√£o est√° interpretando corretamente a op√ß√£o
<code>Fallback</code> na linha 8 do arquivo, que corresponde ao
fechamento do comando <code>\setmainfont</code>. Esse erro ocorre porque
a sintaxe do <code>Fallback</code> ainda est√° incorreta ou n√£o √©
compat√≠vel com a vers√£o do <code>luaotfload</code> instalada no seu
sistema MSYS2. Al√©m disso, o suporte a emojis coloridos com
<code>NotoColorEmoji.ttf</code> depende de uma configura√ß√£o precisa e de
um ambiente TeX Live funcional.</p>
<p>A linha problem√°tica no seu <code>teste.tex</code> provavelmente √© a
configura√ß√£o do <code>Fallback</code> que sugeri anteriormente:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>O erro sugere que o <code>luaotfload</code> n√£o reconhece a op√ß√£o
<code>Fallback</code> como est√° escrita. Isso pode ser devido a: 1. Uma
sintaxe incorreta ou n√£o suportada na vers√£o atual do
<code>luaotfload</code>. 2. Uma vers√£o desatualizada ou mal configurada
do <code>luaotfload</code> ou TeX Live. 3. Problemas com o
reconhecimento da fonte <code>Noto Color Emoji</code>.</p>
<p>Vou te guiar para corrigir isso, simplificando a abordagem e testando
alternativas, garantindo que o <code>NotoColorEmoji.ttf</code> funcione
com Pandoc e LuaLaTeX no MSYS2.</p>
<h3 data-number="1.2.30" id="passos-para-resolver-2"><span class="header-section-number">1.2.30</span> Passos para Resolver</h3>
<h4 data-number="1.2.30.1" id="simplifique-o-arquivo-teste.tex"><span class="header-section-number">1.2.30.1</span> 1. Simplifique o Arquivo
<code>teste.tex</code></h4>
<p>Vamos tentar uma configura√ß√£o mais simples para isolar o problema.
Use apenas a fonte <code>Noto Color Emoji</code> como principal, sem o
mecanismo de fallback, para verificar se o <code>luaotfload</code>
consegue carregar a fonte corretamente:</p>
<p>Crie um novo <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><strong>Se funcionar</strong>: O PDF (<code>teste.pdf</code>) deve
mostrar emojis coloridos, indicando que o <code>Noto Color Emoji</code>
est√° instalado e o <code>luaotfload</code> suporta o modo
<code>HarfBuzz</code>. O problema original est√° no mecanismo de
fallback.</li>
<li><strong>Se der erro</strong>: Pode ser um problema com a fonte ou o
<code>luaotfload</code>. Veja o log (<code>teste.log</code>) para
detalhes.</li>
</ul>
<h4 data-number="1.2.30.2" id="ajuste-o-mecanismo-de-fallback"><span class="header-section-number">1.2.30.2</span> 2. Ajuste o Mecanismo de
Fallback</h4>
<p>Se o teste acima funcionar, o problema est√° na sintaxe do
<code>Fallback</code>. O <code>luaotfload</code> suporta fallbacks, mas
a sintaxe pode variar por vers√£o. Tente uma abordagem alternativa para o
<code>teste.tex</code>:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<ul>
<li><strong>Explica√ß√£o</strong>:
<ul>
<li>Usamos <code>\directlua</code> para registrar um fallback chamado
<code>emoji_fallback</code> diretamente no <code>luaotfload</code>.</li>
<li>A op√ß√£o <code>RawFeature={fallback=emoji_fallback}</code> ativa o
fallback para a fonte principal.</li>
<li>Isso √© mais compat√≠vel com vers√µes recentes do
<code>luaotfload</code> (ex.: 3.x no TeX Live 2025).</li>
</ul></li>
</ul>
<p>Compile:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<p>Se ainda der erro, use o caminho completo da fonte:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h4 data-number="1.2.30.3" id="verifique-a-fonte-noto-color-emoji-1"><span class="header-section-number">1.2.30.3</span> 3. Verifique a Fonte
<code>Noto Color Emoji</code></h4>
<p>Certifique-se de que a fonte est√° instalada e reconhecida:</p>
<ul>
<li><p>Confirme a presen√ßa:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<ul>
<li><p>Se n√£o estiver, baixe novamente:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
</ul></li>
<li><p>Atualize o cache de fontes:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p>Liste fontes dispon√≠veis:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Deve mostrar <code>Noto Color Emoji</code>. Se n√£o aparecer, o
<code>luaotfload</code> n√£o est√° vendo a fonte.</li>
</ul></li>
</ul>
<h4 data-number="1.2.30.4" id="verifique-a-vers√£o-do-luaotfload"><span class="header-section-number">1.2.30.4</span> 4. Verifique a Vers√£o do
<code>luaotfload</code></h4>
<p>O erro pode ser devido a uma vers√£o antiga ou com bugs do
<code>luaotfload</code>. Verifique:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>A vers√£o deve ser 3.x ou superior (ex.: parte do TeX Live
2025).</p></li>
<li><p>Se estiver desatualizado ou ausente, atualize o TeX Live usando
<code>tlmgr</code> (se instalado o TeX Live oficial):</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> update <span class="at">--self</span> <span class="at">--all</span></span></code></pre></div></li>
<li><p>Se o TeX Live foi instalado via MSYS2
(<code>mingw-w64-x86_64-texlive-core</code>), pode estar incompleto.
Reinstale o TeX Live oficial:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> install-tl.zip</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-<span class="pp">*</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="ex">./install-tl-windows.bat</span></span></code></pre></div>
<p>Adicione ao PATH em <code>~/.bashrc</code>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/c/texlive/2025/bin/win32:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.30.5" id="teste-com-pandoc-4"><span class="header-section-number">1.2.30.5</span> 5. Teste com Pandoc</h4>
<p>Ap√≥s corrigir o <code>teste.tex</code>, aplique ao Pandoc. Crie
<code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Se der erro, use o caminho completo:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Use <code>--verbose</code> para depurar:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.30.6" id="alternativa-simplifique-com-xelatex"><span class="header-section-number">1.2.30.6</span> 6. Alternativa:
Simplifique com XeLaTeX</h4>
<p>Se o LuaLaTeX continuar falhando, teste com XeLaTeX (menos ideal para
emojis coloridos):</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>xelatex <span class="at">-V</span> mainfont=<span class="st">&quot;Noto Color Emoji&quot;</span></span></code></pre></div>
<ul>
<li>Isso pode renderizar emojis, mas n√£o necessariamente coloridos.</li>
</ul>
<h4 data-number="1.2.30.7" id="depura√ß√£o-adicional-2"><span class="header-section-number">1.2.30.7</span> 7. Depura√ß√£o
Adicional</h4>
<ul>
<li><p><strong>Log do LuaLaTeX</strong>: Ap√≥s
<code>lualatex teste.tex</code>, abra <code>teste.log</code> e procure
por mensagens sobre <code>luaotfload</code>, fontes ausentes, ou erros
de fallback.</p></li>
<li><p><strong>Confirme o PATH</strong>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li>Deve apontar para <code>/c/texlive/2025/bin/win32/lualatex</code> ou
<code>/mingw64/bin/lualatex</code>.</li>
</ul></li>
<li><p><strong>Vers√µes</strong>:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--version</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span></code></pre></div></li>
<li><p><strong>Fonte Alternativa</strong>: Se o
<code>Noto Color Emoji</code> falhar, teste com
<code>Symbola</code>:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> Symbola.ttf https://github.com/oomox/oomox/raw/master/fonts/Symbola.ttf</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> Symbola.ttf /c/Windows/Fonts/</span></code></pre></div>
<p>Atualize o <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    &quot;Symbola:mode=harf&quot;</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h3 data-number="1.2.31" id="resumo-4"><span class="header-section-number">1.2.31</span> Resumo</h3>
<ul>
<li>O erro √© causado por uma sintaxe incorreta no <code>Fallback</code>.
Use <code>\directlua</code> com <code>luaotfload.add_fallback</code>
para configurar o fallback.</li>
<li>Confirme que <code>NotoColorEmoji.ttf</code> est√° em
<code>/c/Windows/Fonts/</code> e no cache do
<code>luaotfload</code>.</li>
<li>Atualize o TeX Live para a vers√£o oficial se os pacotes MSYS2 forem
problem√°ticos.</li>
<li>Teste primeiro com <code>lualatex</code>, depois com Pandoc.</li>
</ul>
<p>Por favor, compartilhe: - O output completo de
<code>lualatex teste.tex</code> (incluindo <code>teste.log</code>, se
poss√≠vel). - Resultado de
<code>luaotfload-tool --list=names | grep Noto</code>. - Output de
<code>pandoc --version</code>, <code>lualatex --version</code>, e
<code>luaotfload-tool --version</code>.</p>
<p>Estamos quase l√° para fazer esses emojis üò∫üöÄ aparecerem
coloridos!</p>
<hr />
<h3 data-number="1.2.32" id="utilizador-2025-09-23-202405-grok"><span class="header-section-number">1.2.32</span> üë§ Utilizador
<em>(2025-09-23 20:24:05)</em> <em>[Grok]</em></h3>
<p>lualatex teste.tex produz teste.pdf com os emoji n√£o coloridos</p>
<hr />
<h3 data-number="1.2.33" id="grok-2025-09-23-202459-grok"><span class="header-section-number">1.2.33</span> ü§ñ Grok <em>(2025-09-23
20:24:59)</em> <em>[Grok]</em></h3>
<p>Entendido! Voc√™ conseguiu compilar o arquivo <code>teste.tex</code>
com <code>lualatex</code> no MSYS2, e o <code>teste.pdf</code> foi
gerado, mas os emojis (üò∫üöÄ) est√£o aparecendo em preto e branco, n√£o
coloridos, mesmo usando a fonte <code>NotoColorEmoji.ttf</code>. Isso
indica que o LuaLaTeX est√° carregando a fonte, mas n√£o est√° renderizando
os emojis no modo colorido, provavelmente devido a uma configura√ß√£o
incorreta do renderer (<code>HarfBuzz</code>) ou uma limita√ß√£o na vers√£o
do <code>luaotfload</code> ou do TeX Live. Como voc√™ est√° usando MSYS2 e
quer suporte a emojis coloridos com Pandoc, vou te guiar para corrigir
isso de forma precisa, focando em ajustes no <code>teste.tex</code>,
verifica√ß√£o do ambiente e configura√ß√£o para o Pandoc.</p>
<h3 data-number="1.2.34" id="diagn√≥stico"><span class="header-section-number">1.2.34</span> Diagn√≥stico</h3>
<p>O arquivo <code>teste.tex</code> atual, baseado no contexto,
provavelmente √©:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Ou a vers√£o alternativa com <code>\directlua</code>:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>O fato de os emojis aparecerem em preto e branco sugere que: 1. O
modo <code>HarfBuzz</code> (necess√°rio para emojis coloridos) n√£o est√°
sendo aplicado corretamente. 2. A fonte <code>Noto Color Emoji</code>
pode estar sendo carregada, mas sem suporte a glifos coloridos (ex.:
usando um renderer errado ou uma fonte monocrom√°tica). 3. A vers√£o do
<code>luaotfload</code> ou do TeX Live pode n√£o suportar totalmente
emojis coloridos.</p>
<h3 data-number="1.2.35" id="passos-para-corrigir-1"><span class="header-section-number">1.2.35</span> Passos para Corrigir</h3>
<h4 data-number="1.2.35.1" id="teste-com-noto-color-emoji-como-fonte-principal"><span class="header-section-number">1.2.35.1</span> 1. Teste com
<code>Noto Color Emoji</code> como Fonte Principal</h4>
<p>Para isolar o problema, modifique o <code>teste.tex</code> para usar
apenas <code>Noto Color Emoji</code> como fonte principal, sem fallback,
e confirme se os emojis aparecem coloridos:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><strong>Se os emojis forem coloridos no PDF</strong>: O problema
est√° na configura√ß√£o do fallback. Pule para o Passo 3.</li>
<li><strong>Se os emojis continuarem preto e branco</strong>: O problema
est√° no suporte ao renderer <code>HarfBuzz</code> ou na fonte. Continue
com o Passo 2.</li>
<li><strong>Se der erro</strong>: Verifique o log
(<code>teste.log</code>) e compartilhe.</li>
</ul>
<h4 data-number="1.2.35.2" id="verifique-o-suporte-a-harfbuzz-e-a-fonte"><span class="header-section-number">1.2.35.2</span> 2. Verifique o Suporte a
<code>HarfBuzz</code> e a Fonte</h4>
<p>O suporte a emojis coloridos requer que o <code>luaotfload</code> use
o renderer <code>HarfBuzz</code> (modo <code>harf</code>). Vamos
confirmar o ambiente:</p>
<ul>
<li><p><strong>Verifique a Fonte</strong>: Confirme que
<code>NotoColorEmoji.ttf</code> est√° instalada:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<ul>
<li><p>Se n√£o estiver, baixe a vers√£o mais recente:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
</ul></li>
<li><p><strong>Atualize o Cache de Fontes</strong>:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Confirme Reconhecimento da Fonte</strong>:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li><p>Deve listar <code>Noto Color Emoji</code>. Se n√£o aparecer, use o
caminho completo:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span></code></pre></div></li>
</ul></li>
<li><p><strong>Verifique a Vers√£o do
<code>luaotfload</code></strong>:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li>Deve ser <code>luaotfload 3.x</code> ou superior (compat√≠vel com TeX
Live 2025). Vers√µes antigas podem n√£o suportar emojis coloridos
adequadamente.</li>
</ul></li>
<li><p><strong>Verifique o TeX Live</strong>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>Deve ser LuaTeX 1.12 ou superior (TeX Live 2025). Se estiver
usando uma vers√£o antiga, reinstale o TeX Live oficial:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> install-tl.zip</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-<span class="pp">*</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="ex">./install-tl-windows.bat</span></span></code></pre></div>
<p>Adicione ao PATH em <code>~/.bashrc</code>:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export PATH=&quot;/c/texlive/2025/bin/win32:$PATH&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div></li>
<li><p>Atualize os pacotes:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="ex">tlmgr</span> update <span class="at">--self</span> <span class="at">--all</span></span></code></pre></div></li>
</ul></li>
</ul>
<h4 data-number="1.2.35.3" id="ajuste-o-mecanismo-de-fallback-1"><span class="header-section-number">1.2.35.3</span> 3. Ajuste o Mecanismo de
Fallback</h4>
<p>Se o Passo 1 mostrou emojis coloridos, o problema est√° no fallback.
Use a abordagem com <code>\directlua</code>, que √© mais robusta para
vers√µes recentes do <code>luaotfload</code>:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>Se os emojis ainda forem preto e branco, tente especificar o
caminho completo:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.35.4" id="teste-com-pandoc-5"><span class="header-section-number">1.2.35.4</span> 4. Teste com Pandoc</h4>
<p>Ap√≥s corrigir o <code>teste.tex</code>, aplique ao Pandoc. Crie
<code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Se os emojis n√£o forem coloridos, use o caminho completo:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Para depura√ß√£o:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.35.5" id="verifique-o-log-do-lualatex"><span class="header-section-number">1.2.35.5</span> 5. Verifique o Log do
LuaLaTeX</h4>
<p>Abra <code>teste.log</code> ap√≥s compilar
<code>lualatex teste.tex</code>. Procure por: - Mensagens sobre
<code>Noto Color Emoji</code> (ex.: ‚Äúfont not found‚Äù ou ‚Äúusing
fallback‚Äù). - Avisos sobre o renderer (ex.:
<code>harfbuzz not available</code>). - Erros relacionados a glifos
ausentes.</p>
<p>Se encontrar algo como ‚Äúfont does not contain color information‚Äù, a
fonte pode estar corrompida ou ser uma vers√£o monocrom√°tica. Baixe
novamente do reposit√≥rio oficial.</p>
<h4 data-number="1.2.35.6" id="alternativa-teste-com-outra-fonte"><span class="header-section-number">1.2.35.6</span> 6. Alternativa: Teste com
Outra Fonte</h4>
<p>Se o <code>Noto Color Emoji</code> continuar falhando, teste com a
fonte <code>Twemoji</code> (Mozilla), que tamb√©m suporta emojis
coloridos:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> TwemojiMozilla.ttf https://github.com/mozilla/twemoji-colr/releases/download/v0.7.0/TwemojiMozilla.ttf</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> TwemojiMozilla.ttf /c/Windows/Fonts/</span></code></pre></div>
<p>Atualize o cache:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Modifique <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>    &quot;Twemoji Mozilla:mode=harf&quot;</span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<h4 data-number="1.2.35.7" id="considere-limita√ß√µes-do-lualatex"><span class="header-section-number">1.2.35.7</span> 7. Considere Limita√ß√µes do
LuaLaTeX</h4>
<ul>
<li>Algumas vers√µes do LuaLaTeX no MSYS2 podem ter suporte limitado a
emojis coloridos devido a depend√™ncias do HarfBuzz.</li>
<li>Se o TeX Live oficial (instalado manualmente) n√£o resolver, tente
usar XeLaTeX como fallback, embora emojis coloridos sejam menos
suportados:</li>
</ul>
<div class="sourceCode" id="cb164"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>xelatex <span class="at">-V</span> mainfont=<span class="st">&quot;Noto Color Emoji&quot;</span></span></code></pre></div>
<h4 data-number="1.2.35.8" id="resumo-5"><span class="header-section-number">1.2.35.8</span> Resumo</h4>
<ul>
<li>Os emojis preto e branco indicam que o renderer
<code>HarfBuzz</code> n√£o est√° funcionando corretamente.</li>
<li>Teste com <code>Noto Color Emoji</code> como fonte principal para
confirmar suporte a cores.</li>
<li>Use <code>\directlua</code> com <code>luaotfload.add_fallback</code>
para configurar o fallback.</li>
<li>Verifique vers√µes do <code>luaotfload</code> e TeX Live, atualizando
se necess√°rio.</li>
<li>Considere fontes alternativas como <code>Twemoji Mozilla</code> se o
problema persistir.</li>
</ul>
<p>Por favor, compartilhe: - O output de <code>lualatex teste.tex</code>
(especialmente o <code>teste.log</code>). - Resultado de
<code>luaotfload-tool --list=names | grep Noto</code>. - Output de
<code>lualatex --version</code>, <code>luaotfload-tool --version</code>,
e <code>pandoc --version</code>. - Confirma√ß√£o se o teste com
<code>Noto Color Emoji</code> como fonte principal (Passo 1) produziu
emojis coloridos.</p>
<p>Vamos garantir que esses emojis üò∫üöÄ fiquem coloridos no seu PDF!</p>
<hr />
<h3 data-number="1.2.36" id="utilizador-2025-09-23-203119-grok"><span class="header-section-number">1.2.36</span> üë§ Utilizador
<em>(2025-09-23 20:31:19)</em> <em>[Grok]</em></h3>
<p>estou a usar miktex em vez de texlive</p>
<hr />
<h3 data-number="1.2.37" id="grok-2025-09-23-203210-grok"><span class="header-section-number">1.2.37</span> ü§ñ Grok <em>(2025-09-23
20:32:10)</em> <em>[Grok]</em></h3>
<p>Entendido! Voc√™ est√° usando o <strong>MiKTeX</strong> em vez do TeX
Live no MSYS2, e o problema √© que o arquivo <code>teste.pdf</code>
gerado pelo <code>lualatex teste.tex</code> mostra emojis (üò∫üöÄ) em
preto e branco, apesar de usar a fonte <code>NotoColorEmoji.ttf</code>.
Isso sugere que o renderer <code>HarfBuzz</code> (necess√°rio para emojis
coloridos) n√£o est√° sendo aplicado corretamente ou que h√° uma
configura√ß√£o incorreta no <code>fontspec</code>/<code>luaotfload</code>.
Como voc√™ est√° no MSYS2 e usando MiKTeX, vou adaptar a solu√ß√£o para
garantir que os emojis sejam renderizados coloridos com o Pandoc e
LuaLaTeX, considerando as particularidades do MiKTeX em setembro de
2025.</p>
<h3 data-number="1.2.38" id="diagn√≥stico-1"><span class="header-section-number">1.2.38</span> Diagn√≥stico</h3>
<p>O arquivo <code>teste.tex</code> atual provavelmente √© algo como:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>  RawFeature={+fallback},</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>  Fallback={</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\fontspec</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Ou a vers√£o com <code>\directlua</code>:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>O problema dos emojis em preto e branco indica que: 1. O
<code>luaotfload</code> (usado pelo MiKTeX) pode n√£o estar configurado
corretamente para o modo <code>HarfBuzz</code>. 2. A fonte
<code>Noto Color Emoji</code> pode estar sendo carregada, mas sem glifos
coloridos (ex.: usando um renderer padr√£o ou uma fonte incorreta). 3. A
vers√£o do <code>luaotfload</code> ou do LuaTeX no MiKTeX pode ter
limita√ß√µes com emojis coloridos.</p>
<h3 data-number="1.2.39" id="passos-para-corrigir-2"><span class="header-section-number">1.2.39</span> Passos para Corrigir</h3>
<h4 data-number="1.2.39.1" id="verifique-a-instala√ß√£o-do-miktex"><span class="header-section-number">1.2.39.1</span> 1. Verifique a Instala√ß√£o
do MiKTeX</h4>
<p>Como voc√™ est√° usando MiKTeX, certifique-se de que ele est√°
atualizado e configurado corretamente no MSYS2:</p>
<ul>
<li><p><strong>Verifique a Vers√£o do LuaLaTeX</strong>:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li>Deve ser LuaTeX 1.12 ou superior (MiKTeX 24.10 ou mais recente,
considerando 2025).</li>
</ul></li>
<li><p><strong>Atualize o MiKTeX</strong>: No MSYS2, execute:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="ex">miktexsetup</span> <span class="at">--shared</span><span class="op">=</span>yes update</span></code></pre></div>
<p>Ou, no Windows, use o <strong>MiKTeX Console</strong> (como
administrador) e clique em ‚ÄúCheck for Updates‚Äù &gt; ‚ÄúUpdate
Now‚Äù.</p></li>
<li><p><strong>Instale Pacotes Necess√°rios</strong>: Certifique-se de
que os pacotes <code>fontspec</code> e <code>luaotfload</code> est√£o
instalados:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>fontspec</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>luaotfload</span></code></pre></div>
<ul>
<li>O MiKTeX deve baixar automaticamente se configurado para instalar
pacotes sob demanda. Caso contr√°rio, use o MiKTeX Console para
instalar.</li>
</ul></li>
<li><p><strong>Verifique o <code>fontspec</code></strong>:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> / <span class="at">-name</span> fontspec.sty <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span></code></pre></div>
<ul>
<li>No MiKTeX, deve estar em algo como
<code>/c/ProgramData/MiKTeX/2.9/tex/latex/fontspec/fontspec.sty</code>
ou similar.</li>
</ul></li>
</ul>
<h4 data-number="1.2.39.2" id="confirme-a-fonte-noto-color-emoji-1"><span class="header-section-number">1.2.39.2</span> 2. Confirme a Fonte
<code>Noto Color Emoji</code></h4>
<p>Certifique-se de que a fonte <code>NotoColorEmoji.ttf</code> est√°
instalada e acess√≠vel:</p>
<ul>
<li><p><strong>Verifique a Presen√ßa</strong>:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<ul>
<li><p>Se n√£o estiver, baixe novamente:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
</ul></li>
<li><p><strong>Atualize o Cache de Fontes</strong>: O MiKTeX usa
<code>luaotfload</code> para gerenciar fontes. Atualize o cache:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Confirme Reconhecimento</strong>:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Deve listar <code>Noto Color Emoji</code>. Se n√£o aparecer, use o
caminho completo nos testes abaixo.</li>
</ul></li>
</ul>
<h4 data-number="1.2.39.3" id="teste-com-noto-color-emoji-como-fonte-principal-1"><span class="header-section-number">1.2.39.3</span> 3. Teste com
<code>Noto Color Emoji</code> como Fonte Principal</h4>
<p>Para isolar o problema, modifique <code>teste.tex</code> para usar
apenas <code>Noto Color Emoji</code> como fonte principal, garantindo
que o renderer <code>HarfBuzz</code> seja aplicado:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><strong>Se os emojis forem coloridos</strong>: O problema est√° na
configura√ß√£o do fallback. V√° para o Passo 4.</li>
<li><strong>Se forem preto e branco</strong>: O renderer
<code>HarfBuzz</code> n√£o est√° funcionando ou a fonte n√£o suporta cores.
Continue com o Passo 5.</li>
<li><strong>Se der erro</strong>: Verifique o <code>teste.log</code> e
compartilhe.</li>
</ul>
<h4 data-number="1.2.39.4" id="ajuste-o-mecanismo-de-fallback-2"><span class="header-section-number">1.2.39.4</span> 4. Ajuste o Mecanismo de
Fallback</h4>
<p>Se o teste acima mostrou emojis coloridos, o problema est√° no
fallback. Use uma configura√ß√£o mais compat√≠vel com o
<code>luaotfload</code>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>Se os emojis continuarem preto e branco, tente o caminho
completo:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.39.5" id="verifique-o-suporte-a-harfbuzz"><span class="header-section-number">1.2.39.5</span> 5. Verifique o Suporte a
<code>HarfBuzz</code></h4>
<p>O suporte a emojis coloridos depende do renderer
<code>HarfBuzz</code>. Confirme a vers√£o do <code>luaotfload</code>:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>Deve ser <code>luaotfload 3.x</code> ou superior. Se estiver
desatualizado, force a atualiza√ß√£o no MiKTeX:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--update</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>luaotfload</span></code></pre></div></li>
<li><p>Se o <code>HarfBuzz</code> n√£o estiver funcionando, teste com o
renderer padr√£o:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}</span></code></pre></div>
<ul>
<li>Isso pode usar o renderer <code>node</code> (menos confi√°vel para
emojis coloridos).</li>
</ul></li>
</ul>
<h4 data-number="1.2.39.6" id="teste-com-pandoc-6"><span class="header-section-number">1.2.39.6</span> 6. Teste com Pandoc</h4>
<p>Aplique a configura√ß√£o ao Pandoc. Crie <code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Se necess√°rio, use o caminho completo:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Para depurar:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.39.7" id="alternativa-teste-com-outra-fonte-1"><span class="header-section-number">1.2.39.7</span> 7. Alternativa: Teste com
Outra Fonte</h4>
<p>Se o <code>Noto Color Emoji</code> n√£o renderizar cores, experimente
a fonte <code>Twemoji Mozilla</code>:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> TwemojiMozilla.ttf https://github.com/mozilla/twemoji-colr/releases/download/v0.7.0/TwemojiMozilla.ttf</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> TwemojiMozilla.ttf /c/Windows/Fonts/</span></code></pre></div>
<p>Atualize o cache:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Modifique <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>    &quot;Twemoji Mozilla:mode=harf&quot;</span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<h4 data-number="1.2.39.8" id="depura√ß√£o-adicional-3"><span class="header-section-number">1.2.39.8</span> 8. Depura√ß√£o
Adicional</h4>
<ul>
<li><p><strong>Log do LuaLaTeX</strong>: Ap√≥s
<code>lualatex teste.tex</code>, abra <code>teste.log</code> e procure
por:</p>
<ul>
<li>Mensagens sobre <code>Noto Color Emoji</code> (ex.: ‚Äúno color
glyphs‚Äù).</li>
<li>Erros do <code>HarfBuzz</code> ou <code>luaotfload</code>.</li>
</ul></li>
<li><p><strong>PATH do MiKTeX</strong>: Confirme que
<code>lualatex</code> est√° no PATH:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li>Deve apontar para algo como
<code>/c/Program Files/MiKTeX/miktex/bin/x64/lualatex</code>.</li>
</ul></li>
<li><p><strong>Reinstale o Pandoc</strong>:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> pandoc.msi https://github.com/jgm/pandoc/releases/latest/download/pandoc-3.1.13-windows-x86_64.msi</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="ex">msiexec</span> /i pandoc.msi /quiet</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.39.9" id="resumo-6"><span class="header-section-number">1.2.39.9</span> Resumo</h4>
<ul>
<li>Os emojis preto e branco indicam que o renderer
<code>HarfBuzz</code> n√£o est√° funcionando corretamente.</li>
<li>Teste com <code>Noto Color Emoji</code> como fonte principal para
confirmar suporte a cores.</li>
<li>Use <code>\directlua</code> com <code>luaotfload.add_fallback</code>
para configurar o fallback.</li>
<li>Atualize o MiKTeX e verifique o <code>luaotfload</code>.</li>
<li>Tente a fonte <code>Twemoji Mozilla</code> como alternativa.</li>
</ul>
<p>Por favor, compartilhe: - O output de <code>lualatex teste.tex</code>
(especialmente <code>teste.log</code>). - Resultado de
<code>luaotfload-tool --list=names | grep Noto</code>. - Output de
<code>lualatex --version</code>, <code>luaotfload-tool --version</code>,
e <code>pandoc --version</code>. - Confirma√ß√£o se o teste com
<code>Noto Color Emoji</code> como fonte principal (Passo 3) produziu
emojis coloridos.</p>
<p>Vamos fazer esses emojis üò∫üöÄ brilharem coloridos no seu PDF!</p>
<hr />
<h3 data-number="1.2.40" id="utilizador-2025-09-23-204420-grok"><span class="header-section-number">1.2.40</span> üë§ Utilizador
<em>(2025-09-23 20:44:20)</em> <em>[Grok]</em></h3>
<p>lualatex teste.tex produz correctamente o pdf a partir da font
Twemoji Mozilla</p>
<hr />
<h3 data-number="1.2.41" id="grok-2025-09-23-204506-grok"><span class="header-section-number">1.2.41</span> ü§ñ Grok <em>(2025-09-23
20:45:06)</em> <em>[Grok]</em></h3>
<p>√ìtimo! Voc√™ confirmou que o comando <code>lualatex teste.tex</code>
com a fonte <code>Twemoji Mozilla</code> produz corretamente o
<code>teste.pdf</code> com emojis coloridos (üò∫üöÄ), o que indica que o
renderer <code>HarfBuzz</code> est√° funcionando bem com essa fonte no
seu ambiente MiKTeX no MSYS2. Isso √© um grande progresso! No entanto,
parece que a fonte <code>Noto Color Emoji</code> ainda n√£o est√°
renderizando emojis coloridos, e voc√™ quer usar o Pandoc com suporte a
emojis coloridos (provavelmente com <code>Noto Color Emoji</code> ou
<code>Twemoji Mozilla</code>). Vou te guiar para:</p>
<ol type="1">
<li>Confirmar por que <code>Noto Color Emoji</code> n√£o est√° funcionando
e corrigir, se desejar us√°-la.</li>
<li>Configurar o Pandoc para usar <code>Twemoji Mozilla</code> (ou
<code>Noto Color Emoji</code>, se corrigida) para gerar PDFs com emojis
coloridos.</li>
<li>Garantir que tudo funcione de forma robusta no MSYS2 com
MiKTeX.</li>
</ol>
<h3 data-number="1.2.42" id="contexto"><span class="header-section-number">1.2.42</span> Contexto</h3>
<p>Seu <code>teste.tex</code> atual com <code>Twemoji Mozilla</code>
provavelmente √©:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>    &quot;Twemoji Mozilla:mode=harf&quot;</span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>E o comando <code>lualatex teste.tex</code> gera um PDF com emojis
coloridos. O problema com <code>Noto Color Emoji</code> pode ser devido
a: - Uma vers√£o incorreta ou corrompida do
<code>NotoColorEmoji.ttf</code>. - Configura√ß√£o inadequada do
<code>luaotfload</code> para essa fonte. - Incompatibilidade espec√≠fica
entre <code>Noto Color Emoji</code> e a vers√£o do
<code>luaotfload</code> no MiKTeX.</p>
<h3 data-number="1.2.43" id="passos-para-resolver-3"><span class="header-section-number">1.2.43</span> Passos para Resolver</h3>
<h4 data-number="1.2.43.1" id="corrigir-noto-color-emoji-opcional"><span class="header-section-number">1.2.43.1</span> 1. Corrigir
<code>Noto Color Emoji</code> (Opcional)</h4>
<p>Se voc√™ prefere usar <code>Noto Color Emoji</code> em vez de
<code>Twemoji Mozilla</code>, vamos garantir que ela funcione:</p>
<ul>
<li><p><strong>Reinstale a Fonte</strong>: Remova a vers√£o atual para
evitar conflitos:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div>
<p>Baixe a vers√£o mais recente do reposit√≥rio oficial:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
<li><p><strong>Atualize o Cache de Fontes</strong>:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Verifique o Reconhecimento</strong>:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Deve listar <code>Noto Color Emoji</code>. Se n√£o aparecer, o MiKTeX
n√£o est√° vendo a fonte.</li>
</ul></li>
<li><p><strong>Teste com <code>Noto Color Emoji</code> como Fonte
Principal</strong>: Modifique <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><strong>Se os emojis forem coloridos</strong>: O problema estava na
configura√ß√£o do fallback. Use o Passo 2 para configurar o fallback
corretamente.</li>
<li><strong>Se forem preto e branco ou der erro</strong>: Verifique o
<code>teste.log</code> para mensagens sobre glifos ou renderer. Pode ser
uma limita√ß√£o da fonte ou do <code>luaotfload</code>.</li>
</ul></li>
<li><p><strong>Use o Caminho Completo</strong> (se necess√°rio):</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.43.2" id="configure-o-pandoc-com-twemoji-mozilla"><span class="header-section-number">1.2.43.2</span> 2. Configure o Pandoc com
<code>Twemoji Mozilla</code></h4>
<p>Como <code>Twemoji Mozilla</code> est√° funcionando, vamos
configur√°-la no Pandoc para gerar PDFs com emojis coloridos. Crie
<code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>    &quot;Twemoji Mozilla:mode=harf&quot;</span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p><strong>Se funcionar</strong>: Voc√™ ver√° emojis coloridos no
<code>exemplo.pdf</code>.</p></li>
<li><p><strong>Se os emojis forem preto e branco</strong>: Adicione
<code>--verbose</code> para depurar:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div>
<ul>
<li>Verifique o log para mensagens sobre fontes ou renderer.</li>
</ul></li>
<li><p><strong>Caminho Completo</strong> (se necess√°rio):</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/TwemojiMozilla.ttf:mode=harf&quot;</span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.43.3" id="configure-o-pandoc-com-noto-color-emoji-se-corrigida"><span class="header-section-number">1.2.43.3</span> 3. Configure o Pandoc com
<code>Noto Color Emoji</code> (Se Corrigida)</h4>
<p>Se o Passo 1 corrigiu <code>Noto Color Emoji</code>, use-a no
Pandoc:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Use o caminho completo se necess√°rio:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.43.4" id="verifique-o-ambiente-miktex"><span class="header-section-number">1.2.43.4</span> 4. Verifique o Ambiente
MiKTeX</h4>
<p>Certifique-se de que o MiKTeX est√° atualizado e configurado
corretamente:</p>
<ul>
<li><p><strong>Atualize o MiKTeX</strong>:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--update</span></span></code></pre></div>
<p>Ou use o MiKTeX Console (como administrador) para atualizar
tudo.</p></li>
<li><p><strong>Confirme Pacotes</strong>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>fontspec</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>luaotfload</span></code></pre></div></li>
<li><p><strong>Verifique Vers√µes</strong>:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--version</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li>LuaTeX deve ser 1.12 ou superior.</li>
<li><code>luaotfload</code> deve ser 3.x ou superior.</li>
<li>Pandoc deve ser ~3.1.13 ou mais recente.</li>
</ul></li>
<li><p><strong>PATH do MiKTeX</strong>:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li>Deve apontar para
<code>/c/Program Files/MiKTeX/miktex/bin/x64/lualatex</code> ou
similar.</li>
</ul></li>
</ul>
<h4 data-number="1.2.43.5" id="depura√ß√£o-adicional-4"><span class="header-section-number">1.2.43.5</span> 5. Depura√ß√£o
Adicional</h4>
<p>Se <code>Noto Color Emoji</code> ainda n√£o funcionar: - <strong>Log
do LuaLaTeX</strong>: Ap√≥s <code>lualatex teste.tex</code> com
<code>Noto Color Emoji</code>, abra <code>teste.log</code> e procure
por: - Mensagens como ‚Äúno color glyphs‚Äù ou ‚Äúfont not found‚Äù. - Erros do
renderer <code>HarfBuzz</code>. - <strong>Teste com Outra Vers√£o da
Fonte</strong>: Algumas vers√µes do <code>Noto Color Emoji</code> podem
ser monocrom√°ticas. Tente uma vers√£o espec√≠fica:
<code>bash   curl -L -o NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/releases/download/v2.042/NotoColorEmoji.ttf   cp NotoColorEmoji.ttf /c/Windows/Fonts/   luaotfload-tool -u -f</code></p>
<h4 data-number="1.2.43.6" id="alternativa-fique-com-twemoji-mozilla"><span class="header-section-number">1.2.43.6</span> 6. Alternativa: Fique com
<code>Twemoji Mozilla</code></h4>
<p>Se <code>Twemoji Mozilla</code> j√° atende suas necessidades, voc√™
pode continuar com ela, j√° que est√° funcionando. A configura√ß√£o do Passo
2 deve ser suficiente para o Pandoc.</p>
<h3 data-number="1.2.44" id="resumo-7"><span class="header-section-number">1.2.44</span> Resumo</h3>
<ul>
<li><code>Twemoji Mozilla</code> est√° funcionando com emojis coloridos,
ent√£o use-a no Pandoc com <code>\directlua</code> e
<code>luaotfload.add_fallback</code>.</li>
<li>Para <code>Noto Color Emoji</code>, reinstale a fonte e teste como
fonte principal. Se funcionar, aplique o fallback.</li>
<li>Verifique vers√µes do MiKTeX, <code>luaotfload</code>, e Pandoc para
garantir compatibilidade.</li>
</ul>
<p>Por favor, compartilhe: - Se voc√™ quer focar em corrigir
<code>Noto Color Emoji</code> ou continuar com
<code>Twemoji Mozilla</code>. - O output de
<code>lualatex teste.tex</code> com <code>Noto Color Emoji</code> como
fonte principal (Passo 1). - Resultado de
<code>luaotfload-tool --list=names | grep -E &#39;Noto|Twemoji&#39;</code>. -
Output de <code>lualatex --version</code>,
<code>luaotfload-tool --version</code>, e <code>pandoc --version</code>.
- O log (<code>teste.log</code>) se <code>Noto Color Emoji</code> ainda
falhar.</p>
<p>Com isso, vamos garantir que seus emojis üò∫üöÄ fiquem coloridos no PDF
gerado pelo Pandoc!</p>
<hr />
<h3 data-number="1.2.45" id="utilizador-2025-09-23-204854-grok"><span class="header-section-number">1.2.45</span> üë§ Utilizador
<em>(2025-09-23 20:48:54)</em> <em>[Grok]</em></h3>
<p>por agora quero focar em corrigir Noto Color Emoji. o resultado de
lualatex teste.tex √© um pdf sem cores</p>
<hr />
<h3 data-number="1.2.46" id="grok-2025-09-23-204911-grok"><span class="header-section-number">1.2.46</span> ü§ñ Grok <em>(2025-09-23
20:49:11)</em> <em>[Grok]</em></h3>
<h3 data-number="1.2.47" id="corre√ß√£o-para-noto-color-emoji-com-emojis-coloridos-no-lualatex-miktex-no-msys2"><span class="header-section-number">1.2.47</span> Corre√ß√£o para Noto Color
Emoji com Emojis Coloridos no LuaLaTeX (MiKTeX no MSYS2)</h3>
<p>Ol√°! Como voc√™ quer focar em corrigir o <code>Noto Color Emoji</code>
e o <code>lualatex teste.tex</code> est√° produzindo um PDF sem cores
(emojis em preto e branco), vamos resolver isso passo a passo. Baseado
em diagn√≥sticos comuns (como suporte a bitmap fonts CBDT/CBLC no
<code>luaotfload</code> e renderer HarfBuzz), o problema geralmente
√©:</p>
<ul>
<li><strong>Vers√£o da fonte</strong>: A <code>NotoColorEmoji.ttf</code>
usa formato bitmap (n√£o outline), que requer o modo <code>harf</code>
(HarfBuzz) para extrair e embedar PNGs coloridos no PDF. Sem isso, cai
para glifos monocrom√°ticos.</li>
<li><strong>Renderer</strong>: Precisa de <code>Renderer=HarfBuzz</code>
explicitamente no <code>fontspec</code>.</li>
<li><strong>Vers√£o do LuaTeX</strong>: O MiKTeX precisa usar o LuaHBTeX
(com HarfBuzz integrado), dispon√≠vel desde MiKTeX 2020+. Se voc√™ estiver
usando uma vers√£o antiga do <code>lualatex</code>, isso falha.</li>
<li><strong>Cache e reconhecimento</strong>: O <code>luaotfload</code>
pode n√£o estar vendo a fonte corretamente.</li>
</ul>
<p>Como o <code>Twemoji Mozilla</code> (COLR/CPAL) funcionou, isso
confirma que o HarfBuzz est√° ok, mas o <code>Noto</code> precisa de
configura√ß√£o espec√≠fica. Vamos corrigir.</p>
<h4 data-number="1.2.47.1" id="baixe-a-vers√£o-mais-recente-da-fonte"><span class="header-section-number">1.2.47.1</span> 1. Baixe a Vers√£o Mais
Recente da Fonte</h4>
<p>A vers√£o atual (v2.044 ou superior, em setembro de 2025) √© essencial
para suporte completo a Unicode 16+. Baixe diretamente do GitHub
oficial:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remova a vers√£o antiga para evitar conflitos</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Baixe a latest (v2.044 ou atual)</span></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Instale</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div>
<ul>
<li><strong>Por qu√™?</strong> Vers√µes antigas podem ter bugs no formato
CBDT/CBLC, levando a renderiza√ß√£o monocrom√°tica. Evite variantes como
<code>-noflags</code> ou <code>emojicompat</code> por enquanto.</li>
</ul>
<h4 data-number="1.2.47.2" id="atualize-o-cache-de-fontes-e-verifique-reconhecimento"><span class="header-section-number">1.2.47.2</span> 2. Atualize o Cache de
Fontes e Verifique Reconhecimento</h4>
<div class="sourceCode" id="cb213"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Verifique se a fonte √© listada (deve mostrar
<code>Noto Color Emoji</code>):</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Se n√£o aparecer, o MiKTeX n√£o v√™ a fonte. Force com o caminho
completo nos testes abaixo.</li>
</ul>
<h4 data-number="1.2.47.3" id="verifique-e-atualize-o-miktex-para-luahbtex"><span class="header-section-number">1.2.47.3</span> 3. Verifique e Atualize o
MiKTeX para LuaHBTeX</h4>
<p>O suporte a cores requer LuaHBTeX (com HarfBuzz). Verifique sua
vers√£o:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li>Deve ser algo como ‚ÄúLuaHBTeX, Version 1.17.0 (MiKTeX 24.x)‚Äù ou
superior. Se for ‚ÄúLuaTeX 1.07‚Äù ou inferior, voc√™ est√° usando uma vers√£o
antiga sem HarfBuzz.</li>
</ul>
<p><strong>Atualize o MiKTeX</strong>: - Abra o <strong>MiKTeX
Console</strong> (como administrador, via Menu Iniciar &gt; MiKTeX
Console). - V√° em ‚ÄúUpdates‚Äù &gt; ‚ÄúCheck for Updates‚Äù &gt; ‚ÄúUpdate Now‚Äù.
- Certifique-se de que pacotes como <code>luaotfload</code>,
<code>fontspec</code> e <code>luatex</code> sejam atualizados. - No
MSYS2, force:
<code>bash   mpm --update   mpm --install=luaotfload fontspec</code></p>
<p>Se ainda for antigo, considere migrar para TeX Live oficial (como
sugerido antes), mas vamos tentar com MiKTeX primeiro.</p>
<h4 data-number="1.2.47.4" id="teste-com-noto-color-emoji-como-fonte-principal-2"><span class="header-section-number">1.2.47.4</span> 4. Teste com
<code>Noto Color Emoji</code> como Fonte Principal</h4>
<p>Modifique <code>teste.tex</code> para usar
<code>Noto Color Emoji</code> diretamente com
<code>Renderer=HarfBuzz</code> (isso ativa o modo <code>harf</code> no
<code>luaotfload</code>, extraindo bitmaps como PNGs coloridos):</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p><strong>Esperado</strong>: Emojis coloridos no
<code>teste.pdf</code> (üò∫ como gato colorido, n√£o outline preto e
branco).</p></li>
<li><p><strong>Se ainda preto e branco</strong>: Verifique o log
(<code>teste.log</code>) por mensagens como ‚Äúno color glyphs‚Äù ou ‚Äúloca
table not found‚Äù (indicando falha no bitmap). Nesse caso, use o caminho
completo:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span></code></pre></div></li>
<li><p><strong>Se der erro ‚Äúloca table not found‚Äù</strong>: Isso √© comum
com Noto bitmap; o HarfBuzz deve ignorar e embedar PNGs. Se persistir,
teste com LuaHBTeX explicitamente (veja Passo 5).</p></li>
</ul>
<h4 data-number="1.2.47.5" id="use-luahbtex-explicitamente-se-necess√°rio"><span class="header-section-number">1.2.47.5</span> 5. Use LuaHBTeX
Explicitamente (Se Necess√°rio)</h4>
<p>Se o <code>lualatex</code> n√£o for LuaHBTeX, compile com o bin√°rio
espec√≠fico (dispon√≠vel no MiKTeX atualizado):</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luahbtex</span> teste.tex</span></code></pre></div>
<ul>
<li>Isso for√ßa o engine com HarfBuzz. Se <code>luahbtex</code> n√£o
existir, atualize o MiKTeX ou instale via Console &gt; Packages &gt;
Procure ‚Äúluatex‚Äù e instale.</li>
</ul>
<h4 data-number="1.2.47.6" id="configure-fallback-para-texto-misto-se-o-principal-funcionar"><span class="header-section-number">1.2.47.6</span> 6. Configure Fallback para
Texto Misto (Se o Principal Funcionar)</h4>
<p>Se o Passo 4 mostrar cores, adicione fallback para texto normal +
emojis:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb220-6"><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb220-7"><a href="#cb220-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb220-8"><a href="#cb220-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb220-9"><a href="#cb220-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb220-10"><a href="#cb220-10" aria-hidden="true" tabindex="-1"></a>Texto normal com emoji: üò∫üöÄ</span>
<span id="cb220-11"><a href="#cb220-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>Use caminho completo se necess√°rio:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.47.7" id="aplique-ao-pandoc"><span class="header-section-number">1.2.47.7</span> 7. Aplique ao Pandoc</h4>
<p>Se o <code>teste.tex</code> agora mostrar cores, use no Pandoc
(<code>exemplo.md</code>):</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Converta:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>Para depura√ß√£o:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
<li><p>Se precisar de LuaHBTeX, use
<code>--pdf-engine=luahbtex</code>.</p></li>
</ul>
<h4 data-number="1.2.47.8" id="alternativas-se-ainda-n√£o-funcionar"><span class="header-section-number">1.2.47.8</span> 8. Alternativas se Ainda
N√£o Funcionar</h4>
<ul>
<li><p><strong>Pacote <code>emoji</code></strong>: Instale via MiKTeX
Console (<code>mpm --install=emoji</code>). Ele usa HarfBuzz
internamente:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">emoji</span>}</span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setemojifont</span>{Noto Color Emoji}</span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="fu">\emoji</span>{cat} <span class="fu">\emoji</span>{rocket}</span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile com <code>lualatex</code>.</p></li>
<li><p><strong>SVGinOT Variant</strong>: Se o bitmap falhar, baixe uma
vers√£o SVG (melhor para LaTeX):</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji-SVGinOT.ttf https://github.com/DeeDeeG/noto-color-emoji-font/releases/download/v1.2-nougat/NotoColorEmoji-SVGinOT-1.2.ttf</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji-SVGinOT.ttf /c/Windows/Fonts/</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Use no <code>teste.tex</code>:
<code>\setmainfont{NotoColorEmoji-SVGinOT.ttf}[Renderer=HarfBuzz]</code>.</p></li>
<li><p><strong>Verifique o Log</strong>: Sempre cheque
<code>teste.log</code> ap√≥s compilar. Procure por ‚ÄúHarfBuzz‚Äù,
‚ÄúCBDT/CBLC‚Äù ou ‚Äúcolor glyphs‚Äù.</p></li>
</ul>
<h4 data-number="1.2.47.9" id="resumo-8"><span class="header-section-number">1.2.47.9</span> Resumo</h4>
<ul>
<li>Baixe a latest <code>NotoColorEmoji.ttf</code> do GitHub.</li>
<li>Use <code>Renderer=HarfBuzz</code> no <code>setmainfont</code> para
ativar modo <code>harf</code>.</li>
<li>Atualize MiKTeX para LuaHBTeX e <code>luaotfload</code> 3.x+.</li>
<li>Teste como fonte principal primeiro, depois fallback.</li>
<li>Se persistir, teste pacote <code>emoji</code> ou variante SVG.</li>
</ul>
<p>Se ainda n√£o der certo, me mande: - Output de
<code>lualatex --version</code> e
<code>luaotfload-tool --version</code>. - Conte√∫do relevante do
<code>teste.log</code> (linhas com ‚Äúfont‚Äù, ‚ÄúHarfBuzz‚Äù ou ‚Äúerror‚Äù). -
Resultado de <code>luaotfload-tool --list=names | grep Noto</code>.</p>
<p>Vamos fazer o <code>Noto Color Emoji</code> brilhar com cores!
üò∫üöÄ</p>
<hr />
<h3 data-number="1.2.48" id="utilizador-2025-09-23-205134-grok"><span class="header-section-number">1.2.48</span> üë§ Utilizador
<em>(2025-09-23 20:51:34)</em> <em>[Grok]</em></h3>
<p><a href="mailto:mpmen@MM04" class="email">mpmen@MM04</a> MINGW64
/d/Downloads/<em>DOCS</em>/<em>DOCS</em>/Test-Msys2-weasyprint #
lualatex ‚Äìversion lualatex: security risk: running with elevated
privileges This is LuaHBTeX, Version 1.22.0 (MiKTeX 25.4) Development
id: 7673 Execute ‚Äòluahbtex ‚Äìcredits‚Äô for credits and version details.
There is NO warranty. Redistribution of this software is covered by the
terms of the GNU General Public License, version 2 or (at your option)
any later version. For more information about these matters, see the
file named COPYING and the LuaTeX source. LuaTeX is Copyright 2025 Taco
Hoekwater and the LuaTeX Team. <a href="mailto:mpmen@MM04" class="email">mpmen@MM04</a> MINGW64
/d/Downloads/<em>DOCS</em>/<em>DOCS</em>/Test-Msys2-weasyprint #
luaotfload-tool ‚Äìversion luaotfload-tool: security risk: running with
elevated privileges luaotfload-tool: Luaotfload font management and
diagnostic utility. License: GNU GPL v2.0. Report problems to <a href="https://github.com/latex3/luaotfload/issues" class="uri">https://github.com/latex3/luaotfload/issues</a>
luaotfload-tool version: ‚Äú3.29‚Äù Luaotfload: ‚Äúv3.29/2024-12-03‚Äù Revision:
‚Äú48139bd3b29cd45baf567b5f35b98ad2b9d7bccb‚Äù Lua interpreter: stock;
version ‚ÄúLua 5.3‚Äù Luatex version: 1.22 Platform: type=windows
name=windows + machine: amd64 + nodename: MM04 + release: build 19045 +
sysname: Windows 10 + version: 10.00 Index: version=6
created=‚Äú2025-09-23 20:41:16‚Äù modified=‚Äú2025-09-23 20:41:16‚Äù</p>
<hr />
<h3 data-number="1.2.49" id="grok-2025-09-23-205222-grok"><span class="header-section-number">1.2.49</span> ü§ñ Grok <em>(2025-09-23
20:52:22)</em> <em>[Grok]</em></h3>
<p>Thank you for sharing the version information and context! You‚Äôre
using <strong>MiKTeX 25.4</strong> with <strong>LuaHBTeX 1.22.0</strong>
and <strong>luaotfload 3.29</strong> (released December 2024) in an
MSYS2 environment on Windows 10. This is a very recent setup, which is
great, as it should fully support emoji rendering with the
<code>HarfBuzz</code> renderer. The fact that
<code>Twemoji Mozilla</code> worked with color emojis (üò∫üöÄ) confirms
that your environment supports color fonts via HarfBuzz, but
<code>Noto Color Emoji</code> is still rendering in black and white,
likely due to issues with the font file, its recognition, or specific
configuration in <code>luaotfload</code>.</p>
<p>Since you‚Äôre focusing on fixing <code>Noto Color Emoji</code>, let‚Äôs
systematically address why it‚Äôs not rendering in color and ensure it
works with both <code>lualatex</code> and Pandoc in MSYS2.</p>
<h3 data-number="1.2.50" id="analysis"><span class="header-section-number">1.2.50</span> Analysis</h3>
<ul>
<li><p><strong>Versions</strong>:</p>
<ul>
<li><code>LuaHBTeX 1.22.0</code> (MiKTeX 25.4) is recent and supports
HarfBuzz for color emoji rendering.</li>
<li><code>luaotfload 3.29</code> (Dec 2024) is up-to-date and should
handle <code>Noto Color Emoji</code>‚Äôs CBDT/CBLC bitmap format.</li>
</ul></li>
<li><p><strong>Current <code>teste.tex</code></strong>: Likely using
something like:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Or with fallback:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span></code></pre></div>
<p>The output PDF shows black-and-white emojis, indicating the color
glyphs (bitmaps) aren‚Äôt being rendered.</p></li>
<li><p><strong>Twemoji Success</strong>: <code>Twemoji Mozilla</code>
(COLR/CPAL format) worked, suggesting HarfBuzz is functional, but
<code>Noto Color Emoji</code> (CBDT/CBLC bitmap) may have issues with
font file integrity or <code>luaotfload</code> configuration.</p></li>
</ul>
<h3 data-number="1.2.51" id="steps-to-fix-noto-color-emoji"><span class="header-section-number">1.2.51</span> Steps to Fix
<code>Noto Color Emoji</code></h3>
<h4 data-number="1.2.51.1" id="reinstall-noto-color-emoji-ensure-correct-version"><span class="header-section-number">1.2.51.1</span> 1. Reinstall
<code>Noto Color Emoji</code> (Ensure Correct Version)</h4>
<p>The <code>Noto Color Emoji</code> font must be the latest version
supporting Unicode 16+ emojis in CBDT/CBLC format. Older or incompatible
versions (e.g., outline-only variants) render in black and white.</p>
<ul>
<li><p><strong>Remove Existing Font</strong>:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span></code></pre></div></li>
<li><p><strong>Download Latest Version</strong>: As of September 2025,
use the latest release from Google Fonts (v2.044 or newer):</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span></code></pre></div></li>
<li><p><strong>Update Font Cache</strong>:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Verify Recognition</strong>:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Expected output: Should list <code>Noto Color Emoji</code>. If
absent, <code>luaotfload</code> isn‚Äôt detecting the font.</li>
</ul></li>
</ul>
<h4 data-number="1.2.51.2" id="test-noto-color-emoji-as-main-font"><span class="header-section-number">1.2.51.2</span> 2. Test
<code>Noto Color Emoji</code> as Main Font</h4>
<p>To isolate the issue, use <code>Noto Color Emoji</code> as the
primary font with explicit <code>HarfBuzz</code> rendering. Create
<code>teste.tex</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p><strong>Expected</strong>: Emojis in color (üò∫ as a colored cat,
üöÄ as a colored rocket).</p></li>
<li><p><strong>If Black-and-White</strong>: Check <code>teste.log</code>
for messages like ‚Äúno color glyphs‚Äù or ‚ÄúCBDT/CBLC not found‚Äù. This
suggests a font issue or renderer misconfiguration.</p></li>
<li><p><strong>If Error (e.g., Font Not Found)</strong>: Use the full
path:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.51.3" id="verify-luahbtex-usage"><span class="header-section-number">1.2.51.3</span> 3. Verify LuaHBTeX
Usage</h4>
<p>Your <code>lualatex</code> is actually <code>LuaHBTeX 1.22.0</code>,
which is perfect for color emojis. Confirm it‚Äôs being used:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li><p>Should point to
<code>/c/Program Files/MiKTeX/miktex/bin/x64/lualatex</code> (or
similar).</p></li>
<li><p>If unsure, explicitly use:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luahbtex</span> teste.tex</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.51.4" id="configure-fallback-for-mixed-text"><span class="header-section-number">1.2.51.4</span> 4. Configure Fallback for
Mixed Text</h4>
<p>If the above produces color emojis, apply the fallback for mixed text
(normal text + emojis). Update <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb239-10"><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a>Texto normal com emoji: üò∫üöÄ</span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p><strong>If Black-and-White</strong>: Try the full path:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.51.5" id="apply-to-pandoc"><span class="header-section-number">1.2.51.5</span> 5. Apply to Pandoc</h4>
<p>Once <code>teste.tex</code> shows color emojis, configure Pandoc.
Create <code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Convert:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p><strong>If Black-and-White</strong>: Use the full path:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Debug</strong>:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.51.6" id="debug-noto-color-emoji-issues"><span class="header-section-number">1.2.51.6</span> 6. Debug
<code>Noto Color Emoji</code> Issues</h4>
<p>If emojis remain black-and-white: - <strong>Check
<code>teste.log</code></strong>: After <code>lualatex teste.tex</code>,
open <code>teste.log</code> and search for: - ‚Äúno color glyphs‚Äù or
‚ÄúCBDT/CBLC‚Äù errors. - Messages about <code>HarfBuzz</code> or font
loading. - Example issue: ‚Äúloca table not found‚Äù (common with bitmap
fonts but should be handled by HarfBuzz).</p>
<ul>
<li><p><strong>Test Alternative Noto Variant</strong>: Try the SVGinOT
version, which may be more compatible:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji-SVGinOT.ttf https://github.com/DeeDeeG/noto-color-emoji-font/releases/download/v1.2-nougat/NotoColorEmoji-SVGinOT-1.2.ttf</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji-SVGinOT.ttf /c/Windows/Fonts/</span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Update <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{NotoColorEmoji-SVGinOT}[Renderer=HarfBuzz]</span></code></pre></div></li>
<li><p><strong>Fallback Font</strong>: If <code>Noto</code> fails,
confirm <code>Twemoji Mozilla</code> still works as a sanity check:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Twemoji Mozilla}[Renderer=HarfBuzz]</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.51.7" id="ensure-miktex-is-fully-updated"><span class="header-section-number">1.2.51.7</span> 7. Ensure MiKTeX is Fully
Updated</h4>
<p>Your MiKTeX 25.4 is recent, but ensure all packages are
up-to-date:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--update</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>luaotfload fontspec</span></code></pre></div>
<p>Or use MiKTeX Console (Admin mode) &gt; Updates &gt; Check for
Updates &gt; Update Now.</p>
<h4 data-number="1.2.51.8" id="additional-debugging"><span class="header-section-number">1.2.51.8</span> 8. Additional
Debugging</h4>
<ul>
<li><p><strong>Font Integrity</strong>: Test the font in a Windows app
(e.g., WordPad). Set font to <code>Noto Color Emoji</code> and type
üò∫üöÄ. If black-and-white, the font file is defective.</p></li>
<li><p><strong>Luaotfload Logs</strong>: Run with verbose output:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-v</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div>
<p>Check for errors about <code>Noto Color Emoji</code>.</p></li>
<li><p><strong>Pandoc Version</strong>:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--version</span></span></code></pre></div>
<ul>
<li><p>Ensure ~3.1.13 or newer. Reinstall if needed:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> pandoc.msi https://github.com/jgm/pandoc/releases/latest/download/pandoc-3.1.13-windows-x86_64.msi</span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="ex">msiexec</span> /i pandoc.msi /quiet</span></code></pre></div></li>
</ul></li>
</ul>
<h3 data-number="1.2.52" id="summary-1"><span class="header-section-number">1.2.52</span> Summary</h3>
<ul>
<li>Your setup (<code>LuaHBTeX 1.22.0</code>,
<code>luaotfload 3.29</code>) supports color emojis, as proven by
<code>Twemoji Mozilla</code>.</li>
<li>Reinstall <code>NotoColorEmoji.ttf</code> from the official
source.</li>
<li>Test with <code>Renderer=HarfBuzz</code> as the main font, then
apply fallback.</li>
<li>Use <code>exemplo.md</code> with <code>\directlua</code> for
Pandoc.</li>
<li>Check <code>teste.log</code> for font or renderer issues.</li>
</ul>
<p>Please provide: - Output of
<code>luaotfload-tool --list=names | grep Noto</code>. - Relevant
<code>teste.log</code> lines (search for ‚Äúfont‚Äù, ‚ÄúHarfBuzz‚Äù, or
‚Äúcolor‚Äù). - Result of the <code>teste.tex</code> test with
<code>Noto Color Emoji</code> as main font (color or black-and-white?).
- Any errors from Pandoc conversion.</p>
<p>We‚Äôll get those üò∫üöÄ emojis in full color with
<code>Noto Color Emoji</code>!</p>
<hr />
<h3 data-number="1.2.53" id="utilizador-2025-09-23-210224-grok"><span class="header-section-number">1.2.53</span> üë§ Utilizador
<em>(2025-09-23 21:02:24)</em> <em>[Grok]</em></h3>
<p>no ponto 4 .8 ‚Ä¶oman}[RawFeature={fallback=emoji_fallback}] ? ! Font
/LatinModernRoman(0)/m/n/10=name:Latin Modern Roman:mode=node;script=
latn;language=dflt;+tlig;fallback=emoji_fallback; at 10pt not loadable:
metric data not found or bad. <to be read again> relax l.8
‚Ä¶oman}[RawFeature={fallback=emoji_fallback}] ? ! Emergency stop.
<to be read again> relax l.8
‚Ä¶oman}[RawFeature={fallback=emoji_fallback}] 379 words of node memory
still in use: 2 hlist, 1 rule, 1 dir, 3 kern, 1 glyph, 3 attribute, 48
glue_spec, 3 attrib ute_list, 2 if_stack, 1 write nodes avail lists:
2:10,3:2,4:1,5:7,7:2,9:3 ! ==&gt; Fatal error occurred, no output PDF
file produced!</p>
<hr />
<h3 data-number="1.2.54" id="grok-2025-09-23-210319-grok"><span class="header-section-number">1.2.54</span> ü§ñ Grok <em>(2025-09-23
21:03:19)</em> <em>[Grok]</em></h3>
<p>Thank you for sharing the error output! The issue occurs when
compiling <code>teste.tex</code> with the configuration in step 4.8,
specifically:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb253-6"><a href="#cb253-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb253-7"><a href="#cb253-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb253-8"><a href="#cb253-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb253-9"><a href="#cb253-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb253-10"><a href="#cb253-10" aria-hidden="true" tabindex="-1"></a>Texto normal com emoji: üò∫üöÄ</span>
<span id="cb253-11"><a href="#cb253-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>The error message:</p>
<pre><code>! Font \TU/LatinModernRoman(0)/m/n/10=name:Latin Modern Roman:mode=node;script=latn;language=dflt;+tlig;fallback=emoji_fallback; at 10pt not loadable: metric data not found or bad.
&lt;to be read again&gt;
                   relax
l.8 ...oman}[RawFeature={fallback=emoji_fallback}]
?
! Emergency stop.
&lt;to be read again&gt;
                   relax
l.8 ...oman}[RawFeature={fallback=emoji_fallback}]
! ==&gt; Fatal error occurred, no output PDF file produced!</code></pre>
<p>indicates that the font <code>Latin Modern Roman</code> is not being
loaded correctly by <code>luaotfload</code> in your MiKTeX 25.4
environment (with LuaHBTeX 1.22.0 and <code>luaotfload 3.29</code>). The
error suggests that either the font metrics (TFM/OTF files) for
<code>Latin Modern Roman</code> are missing, corrupted, or not properly
recognized, causing LuaLaTeX to fail before it can even process the
emoji fallback with <code>Noto Color Emoji</code>. This is likely a
MiKTeX-specific issue, possibly related to font installation or cache
problems, and it prevents rendering the emojis (color or otherwise).</p>
<p>Since your goal is to fix <code>Noto Color Emoji</code> to render
emojis in color (üò∫üöÄ) and you confirmed that
<code>Twemoji Mozilla</code> works, let‚Äôs address the
<code>Latin Modern Roman</code> issue, ensure
<code>Noto Color Emoji</code> renders in color, and configure Pandoc
correctly in your MSYS2 environment as of September 23, 2025.</p>
<h3 data-number="1.2.55" id="analysis-1"><span class="header-section-number">1.2.55</span> Analysis</h3>
<ul>
<li><strong>Error Cause</strong>: The error occurs because
<code>Latin Modern Roman</code> (the default font in
<code>fontspec</code> for LuaLaTeX) is not found or its metrics are
unavailable. This could be due to:
<ul>
<li>Missing <code>latin-modern</code> package in MiKTeX.</li>
<li>Corrupted font cache in <code>luaotfload</code>.</li>
<li>Incorrect font name or configuration in <code>fontspec</code>.</li>
</ul></li>
<li><strong>Noto Color Emoji</strong>: Since the compilation fails at
the font loading stage, we haven‚Äôt yet tested whether
<code>Noto Color Emoji</code> would render in color. The fact that
<code>Twemoji Mozilla</code> worked suggests that <code>HarfBuzz</code>
is functional, so <code>Noto Color Emoji</code> should work once the
font issue is resolved.</li>
<li><strong>MiKTeX Environment</strong>: Your setup (MiKTeX 25.4,
LuaHBTeX 1.22.0, <code>luaotfload 3.29</code>) is recent and should
support color emojis (CBDT/CBLC format) with
<code>Noto Color Emoji</code>.</li>
</ul>
<h3 data-number="1.2.56" id="steps-to-fix"><span class="header-section-number">1.2.56</span> Steps to Fix</h3>
<h4 data-number="1.2.56.1" id="fix-latin-modern-roman-font-issue"><span class="header-section-number">1.2.56.1</span> 1. Fix
<code>Latin Modern Roman</code> Font Issue</h4>
<p>The error is caused by <code>Latin Modern Roman</code> not being
loadable. Let‚Äôs ensure it‚Äôs installed and recognized.</p>
<ul>
<li><p><strong>Install <code>latin-modern</code> Package</strong>:
MiKTeX may not have installed the <code>latin-modern</code> fonts by
default. Install them:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>latin-modern</span></code></pre></div>
<p>Or, in MiKTeX Console (Admin mode):</p>
<ul>
<li>Go to ‚ÄúPackages,‚Äù search for <code>latin-modern</code>, and
install.</li>
</ul></li>
<li><p><strong>Update Font Cache</strong>: Clear and rebuild the
<code>luaotfload</code> font cache:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Verify Font Availability</strong>: Check if
<code>Latin Modern Roman</code> is recognized:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> Latin</span></code></pre></div>
<ul>
<li>Should list <code>Latin Modern Roman</code> or similar (e.g.,
<code>Latin Modern Roman Regular</code>).</li>
</ul></li>
<li><p><strong>Test with <code>Latin Modern Roman</code></strong>:
Create a minimal <code>teste.tex</code> to isolate the font issue:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}</span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a>Teste simples</span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>If it compiles successfully, the font is available. Proceed to
step 2.</p></li>
<li><p>If it fails with a similar error, try an alternative font name
(e.g., <code>LatinModernRoman</code> or <code>LM Roman 10</code>):</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{LatinModernRoman}</span></code></pre></div>
<p>Or install manually:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>lm</span></code></pre></div></li>
</ul></li>
</ul>
<h4 data-number="1.2.56.2" id="test-noto-color-emoji-as-main-font-1"><span class="header-section-number">1.2.56.2</span> 2. Test
<code>Noto Color Emoji</code> as Main Font</h4>
<p>To confirm whether <code>Noto Color Emoji</code> can render in color
(like <code>Twemoji Mozilla</code>), test it directly:</p>
<ul>
<li><p><strong>Ensure Latest Font</strong>:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> /c/Windows/Fonts/NotoColorEmoji.ttf</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> <span class="at">-o</span> NotoColorEmoji.ttf https://github.com/googlefonts/noto-emoji/raw/main/fonts/NotoColorEmoji.ttf</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> NotoColorEmoji.ttf /c/Windows/Fonts/</span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span></span></code></pre></div></li>
<li><p><strong>Verify Font Recognition</strong>:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">--list</span><span class="op">=</span>names <span class="kw">|</span> <span class="fu">grep</span> Noto</span></code></pre></div>
<ul>
<li>Should list <code>Noto Color Emoji</code>. If not, use the full path
in the next step.</li>
</ul></li>
<li><p><strong>Test <code>teste.tex</code></strong>:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Noto Color Emoji}[Renderer=HarfBuzz]</span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a>Texto com emoji: üò∫üöÄ</span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p><strong>Expected</strong>: Emojis in color in
<code>teste.pdf</code>.</p></li>
<li><p><strong>If Black-and-White</strong>: Check <code>teste.log</code>
for messages about ‚Äúno color glyphs‚Äù or ‚ÄúCBDT/CBLC‚Äù. Use the full
path:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{file:/c/Windows/Fonts/NotoColorEmoji.ttf}[Renderer=HarfBuzz]</span></code></pre></div></li>
<li><p><strong>If Error</strong>: Share the error message.</p></li>
</ul></li>
</ul>
<h4 data-number="1.2.56.3" id="rebuild-fallback-configuration"><span class="header-section-number">1.2.56.3</span> 3. Rebuild Fallback
Configuration</h4>
<p>Once <code>Latin Modern Roman</code> and
<code>Noto Color Emoji</code> work individually, combine them with the
fallback. Update <code>teste.tex</code>:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">fontspec</span>}</span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{Latin Modern Roman}[RawFeature={fallback=emoji_fallback}]</span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true" tabindex="-1"></a>Texto normal com emoji: üò∫üöÄ</span>
<span id="cb267-11"><a href="#cb267-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>Compile:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lualatex</span> teste.tex</span></code></pre></div>
<ul>
<li><p>If it fails again with the <code>Latin Modern Roman</code> error,
try an alternative font (e.g., <code>TeX Gyre Termes</code>):</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\setmainfont</span>{TeX Gyre Termes}[RawFeature={fallback=emoji_fallback}]</span></code></pre></div>
<p>Install if needed:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>tex-gyre</span></code></pre></div></li>
<li><p>If <code>Noto Color Emoji</code> renders black-and-white, use the
full path:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\directlua</span>{</span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb271-4"><a href="#cb271-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb271-5"><a href="#cb271-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.56.4" id="apply-to-pandoc-1"><span class="header-section-number">1.2.56.4</span> 4. Apply to Pandoc</h4>
<p>If the above produces color emojis, apply to Pandoc. Create
<code>exemplo.md</code>:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="an">mainfont:</span><span class="co"> Latin Modern Roman</span></span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true" tabindex="-1"></a><span class="an">mainfontoptions:</span></span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - RawFeature=fallback=emoji_fallback</span></span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb272-7"><a href="#cb272-7" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb272-8"><a href="#cb272-8" aria-hidden="true" tabindex="-1"></a>    &quot;Noto Color Emoji:mode=harf&quot;</span>
<span id="cb272-9"><a href="#cb272-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb272-10"><a href="#cb272-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb272-11"><a href="#cb272-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-12"><a href="#cb272-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Teste</span></span>
<span id="cb272-13"><a href="#cb272-13" aria-hidden="true" tabindex="-1"></a>Emoji: üò∫üöÄ</span></code></pre></div>
<p>Convert:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex</span></code></pre></div>
<ul>
<li><p>If black-and-white or error, use the full path:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>\directlua{</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>  luaotfload.add_fallback(&quot;emoji_fallback&quot;, {</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a>    &quot;file:/c/Windows/Fonts/NotoColorEmoji.ttf:mode=harf&quot;</span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Debug:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> exemplo.md <span class="at">-o</span> exemplo.pdf <span class="at">--pdf-engine</span><span class="op">=</span>lualatex <span class="at">--verbose</span></span></code></pre></div></li>
</ul>
<h4 data-number="1.2.56.5" id="debug-noto-color-emoji-color-issue"><span class="header-section-number">1.2.56.5</span> 5. Debug
<code>Noto Color Emoji</code> Color Issue</h4>
<p>If <code>Noto Color Emoji</code> still renders black-and-white: -
<strong>Check <code>teste.log</code></strong>: After
<code>lualatex teste.tex</code>, look for: - ‚Äúno color glyphs‚Äù or
‚ÄúCBDT/CBLC not found‚Äù. - HarfBuzz-related messages (e.g., ‚Äúfalling back
to node‚Äù). - <strong>Test SVGinOT Variant</strong>:
<code>bash   curl -L -o NotoColorEmoji-SVGinOT.ttf https://github.com/DeeDeeG/noto-color-emoji-font/releases/download/v1.2-nougat/NotoColorEmoji-SVGinOT-1.2.ttf   cp NotoColorEmoji-SVGinOT.ttf /c/Windows/Fonts/   luaotfload-tool -u -f</code>
Update <code>teste.tex</code>:
<code>latex   \setmainfont{NotoColorEmoji-SVGinOT}[Renderer=HarfBuzz]</code></p>
<ul>
<li><p><strong>Test with <code>emoji</code> Package</strong>:
Install:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mpm</span> <span class="at">--install</span><span class="op">=</span>emoji</span></code></pre></div>
<p>Use:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">emoji</span>}</span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\setemojifont</span>{Noto Color Emoji}</span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a><span class="fu">\emoji</span>{cat} <span class="fu">\emoji</span>{rocket}</span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div></li>
</ul>
<h4 data-number="1.2.56.6" id="additional-checks"><span class="header-section-number">1.2.56.6</span> 6. Additional Checks</h4>
<ul>
<li><p><strong>MiKTeX PATH</strong>:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> lualatex</span></code></pre></div>
<ul>
<li>Should be
<code>/c/Program Files/MiKTeX/miktex/bin/x64/lualatex</code>.</li>
</ul></li>
<li><p><strong>Font Integrity</strong>: Test
<code>Noto Color Emoji</code> in WordPad (Windows). If emojis are
black-and-white, the font file is defective.</p></li>
<li><p><strong>Verbose Font Loading</strong>:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="ex">luaotfload-tool</span> <span class="at">-u</span> <span class="at">-f</span> <span class="at">-v</span></span></code></pre></div>
<p>Check for errors about <code>Noto Color Emoji</code>.</p></li>
</ul>
<h3 data-number="1.2.57" id="summary-2"><span class="header-section-number">1.2.57</span> Summary</h3>
<ul>
<li>The error is due to <code>Latin Modern Roman</code> not being found.
Install <code>latin-modern</code> and update the font cache.</li>
<li>Test <code>Noto Color Emoji</code> as the main font to confirm color
rendering.</li>
<li>Rebuild the fallback configuration once
<code>Latin Modern Roman</code> works.</li>
<li>Apply to Pandoc with the same <code>\directlua</code> setup.</li>
<li>If <code>Noto Color Emoji</code> fails, try the SVGinOT variant or
the <code>emoji</code> package.</li>
</ul>
<p>Please provide: - Output of
<code>luaotfload-tool --list=names | grep -E &#39;Noto|Latin&#39;</code>. -
Result of the minimal <code>teste.tex</code> with only
<code>Latin Modern Roman</code> (step 1). - Result of
<code>teste.tex</code> with <code>Noto Color Emoji</code> as main font
(step 2). - Relevant <code>teste.log</code> lines (search for ‚Äúfont‚Äù,
‚ÄúHarfBuzz‚Äù, or ‚Äúerror‚Äù).</p>
<p>We‚Äôll get those üò∫üöÄ emojis in vibrant color with
<code>Noto Color Emoji</code>!</p>
<hr />
<h3 data-number="1.2.58" id="utilizador-2025-09-23-210356-grok"><span class="header-section-number">1.2.58</span> üë§ Utilizador
<em>(2025-09-23 21:03:56)</em> <em>[Grok]</em></h3>
passo 4 com teste.tex com

        <script id="fixed-toc-script">
        document.addEventListener('DOMContentLoaded', function() {
            const toc = document.getElementById('TOC');
            if (toc) {
                const tocTitle = toc.querySelector('h2');
                if (tocTitle) {
                    const toggleBtn = document.createElement('button');
                    toggleBtn.innerHTML = '‚ò∞';
                    toggleBtn.className = 'toc-toggle-btn';
                    toggleBtn.title = 'Minimizar/Expandir TOC';
                    let isMinimized = false;
                    toggleBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        isMinimized = !isMinimized;
                        if (isMinimized) {
                            toc.classList.add('toc-minimized');
                        } else {
                            toc.classList.remove('toc-minimized');
                        }
                    });
                    tocTitle.appendChild(toggleBtn);
                }
            }
            
            // SCROLLSPY
            const sections = document.querySelectorAll('h1, h2, h3, h4, h5');
            const tocLinks = document.querySelectorAll('#TOC a');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        tocLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === '#' + id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { 
                rootMargin: '-20% 0px -60% 0px', 
                threshold: 0 
            });
            
            sections.forEach(section => {
                if (section.id) observer.observe(section);
            });
            
            // Scroll suave
            tocLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        const offsetTop = targetElement.offsetTop - 80;
                        window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                    }
                });
            });
            
            // BOT√ÉO VOLTAR AO TOPO
            const backToTopBtn = document.createElement('button');
            backToTopBtn.className = 'back-to-top-content';
            backToTopBtn.innerHTML = '‚Üë';
            backToTopBtn.title = 'Voltar ao Topo';
            document.body.appendChild(backToTopBtn);
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });
            
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        </script>
        
</body>
</html>
